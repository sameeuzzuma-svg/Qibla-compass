<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Prayer Times - Find Namaz Timings & Nearby Mosques</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts - Islamic Style -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Leaflet CSS for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        /* Islamic Prayer Times App - Custom Styles */
        :root {
            --islamic-green: #2d5a3d;
            --islamic-green-light: #4a8061;
            --islamic-gold: #d4af37;
            --islamic-gold-light: #f4d03f;
            --text-dark: #2c3e50;
            --text-light: #ecf0f1;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.15);
            --gradient-green: linear-gradient(135deg, var(--islamic-green), var(--islamic-green-light));
            --gradient-gold: linear-gradient(135deg, var(--islamic-gold), var(--islamic-gold-light));
        }
        /* Base Styles */
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding-top: 120px;
        }
        .arabic-font {
            font-family: 'Amiri', serif;
            font-weight: 700;
        }
        /* Navigation */
        .bg-islamic-green {
            background: var(--gradient-green) !important;
            box-shadow: 0 2px 20px var(--shadow-medium);
        }
        .navbar-brand {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .navbar-nav .nav-link {
            font-weight: 500;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
            border-radius: 25px;
            padding: 0.5rem 1rem !important;
        }
        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        /* Digital Clock */
        .digital-clock {
            background: var(--gradient-gold);
            padding: 1rem 0;
            box-shadow: 0 2px 10px var(--shadow-light);
            position: fixed;
            top: 76px;
            left: 0;
            right: 0;
            z-index: 1020;
        }
        .clock-display {
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-family: 'Roboto', monospace;
            font-weight: 700;
            color: var(--islamic-green);
            box-shadow: 0 4px 15px var(--shadow-light);
        }
        #current-time {
            font-size: 1.2rem;
        }
        #current-date {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        /* Main Content */
        .main-content {
            margin-top: 44px;
        }
        .section {
            display: none;
            padding: 3rem 0;
            min-height: 70vh;
            animation: fadeIn 0.5s ease-in-out;
        }
        .section.active {
            display: block;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .section-header {
            margin-bottom: 3rem;
        }
        .section-header h2 {
            color: var(--islamic-green);
            font-weight: 700;
            margin-bottom: 1rem;
        }
        /* Islamic Welcome */
        .islamic-welcome {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow-light);
            margin-bottom: 2rem;
        }
        .islamic-welcome h1 {
            color: var(--islamic-green);
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .islamic-welcome h2 {
            color: var(--islamic-green);
            font-weight: 700;
        }
        /* Location Card */
        .location-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: transform 0.3s ease;
        }
        .location-card:hover {
            transform: translateY(-5px);
        }
        .location-card .card-header {
            background: var(--gradient-green);
            color: white;
            font-weight: 600;
            padding: 1rem 1.5rem;
            border: none;
        }
        .location-card .card-body {
            padding: 1.5rem;
        }
        /* Prayer Time Cards */
        .prayer-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .prayer-card:hover {
            transform: translateY(-5px);
            border-color: var(--islamic-gold);
            box-shadow: 0 15px 35px var(--shadow-medium);
        }
        .prayer-card .prayer-icon {
            font-size: 2.5rem;
            color: var(--islamic-green);
            margin-bottom: 1rem;
        }
        .prayer-card .prayer-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
        }
        .prayer-card .prayer-time {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--islamic-gold);
            font-family: 'Roboto', monospace;
        }
        .prayer-card.current-prayer {
            background: var(--gradient-green);
            color: white;
        }
        .prayer-card.current-prayer .prayer-icon,
        .prayer-card.current-prayer .prayer-name {
            color: white;
        }
        .prayer-card.current-prayer .prayer-time {
            color: var(--islamic-gold-light);
        }
        /* Time Format Toggle */
        .time-format-toggle {
            margin-top: 1rem;
        }
        .time-format-toggle .form-check-input {
            background-color: var(--islamic-green);
            border-color: var(--islamic-green);
        }
        .time-format-toggle .form-check-input:checked {
            background-color: var(--islamic-gold);
            border-color: var(--islamic-gold);
        }
        .time-format-toggle .form-check-label {
            color: var(--islamic-green);
            font-weight: 500;
            cursor: pointer;
        }
        /* Map Container */
        .map-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px var(--shadow-light);
            height: 500px;
            position: relative;
        }
        #mosque-map {
            height: 100%;
            width: 100%;
        }
        /* Mosque List Items */
        .mosque-item {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 4px 15px var(--shadow-light);
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        .mosque-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--shadow-medium);
        }
        .mosque-name {
            font-weight: 600;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
        }
        .mosque-address {
            color: #6c757d;
            font-size: 0.9rem;
        }
        .mosque-distance {
            color: var(--islamic-gold);
            font-weight: 600;
            font-size: 0.9rem;
        }
        /* Cards */
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-header {
            background: var(--gradient-green);
            color: white;
            border: none;
            font-weight: 600;
        }
        /* Alerts */
        .alert {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 15px var(--shadow-light);
        }
        /* Loading Spinners */
        .spinner-border {
            color: var(--islamic-green) !important;
        }
        /* Buttons */
        .btn-primary {
            background: var(--gradient-green);
            border: none;
            border-radius: 25px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: var(--gradient-gold);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-medium);
        }
        /* Footer */
        footer {
            background: var(--gradient-green) !important;
            margin-top: 3rem;
        }
        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s ease;
            margin: 0 10px;
            font-size: 0.9rem;
        }
        .footer-links a:hover {
            color: white;
            text-decoration: underline;
        }
        /* Animation Classes */
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        /* Custom Leaflet Popup Styles */
        .leaflet-popup-content-wrapper {
            border-radius: 10px;
            box-shadow: 0 4px 15px var(--shadow-medium);
        }
        .leaflet-popup-content {
            margin: 1rem;
            font-family: 'Roboto', sans-serif;
        }
        .mosque-popup-title {
            font-weight: 700;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        .mosque-popup-address {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        .mosque-popup-distance {
            color: var(--islamic-gold);
            font-weight: 600;
            font-size: 0.9rem;
        }
        /* Utility Classes */
        .text-islamic-green {
            color: var(--islamic-green) !important;
        }
        .text-islamic-gold {
            color: var(--islamic-gold) !important;
        }
        .bg-islamic-green {
            background: var(--gradient-green) !important;
        }
        .bg-islamic-gold {
            background: var(--gradient-gold) !important;
        }
        /* Tool Cards */
        .tool-card {
            background: white;
            border-radius: 20px;
            padding: 2rem 1.5rem;
            text-align: center;
            box-shadow: 0 10px 30px var(--shadow-light);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .tool-card:hover {
            transform: translateY(-10px);
            border-color: var(--islamic-gold);
            box-shadow: 0 20px 40px var(--shadow-medium);
        }
        .tool-icon {
            font-size: 3rem;
            color: var(--islamic-green);
            margin-bottom: 1.5rem;
        }
        .tool-title {
            color: var(--islamic-green);
            font-weight: 700;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        .tool-description {
            color: #6c757d;
            margin-bottom: 2rem;
            flex-grow: 1;
        }
        .tool-button {
            color: var(--islamic-gold);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        .tool-card:hover .tool-button {
            transform: translateX(5px);
        }
        /* Quick Stats */
        .quick-stats {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px var(--shadow-light);
        }
        .stat-item {
            padding: 1rem;
        }
        .stat-icon {
            font-size: 2rem;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
        }
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--islamic-gold);
            margin-bottom: 0.5rem;
        }
        .stat-label {
            color: #6c757d;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.9rem;
        }
        /* Mosque Actions */
        .mosque-actions {
            padding-top: 0.5rem;
            border-top: 1px solid #eee;
        }
        .mosque-actions .btn {
            font-size: 0.85rem;
        }
        /* Legal Modal Styles */
        .legal-modal .modal-header {
            background: var(--gradient-green);
            color: white;
        }
        .legal-modal .modal-title {
            font-weight: 700;
        }
        .legal-modal .modal-content {
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-light);
        }
        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding-top: 140px;
            }
            
            .main-content {
                margin-top: 20px;
            }
            
            .islamic-welcome {
                padding: 2rem;
            }
            
            .islamic-welcome h1 {
                font-size: 1.5rem;
            }
            
            .prayer-card {
                margin-bottom: 1rem;
            }
            
            .clock-display {
                padding: 0.5rem 1rem;
            }
            
            #current-time {
                font-size: 1rem;
            }
            
            #current-date {
                display: block;
                margin-top: 0.25rem;
            }
            
            .navbar-brand {
                font-size: 1.2rem;
            }
            
            .section {
                padding: 2rem 0;
            }
            
            .map-container {
                height: 400px;
            }
            .footer-links {
                text-align: center;
                margin-top: 1rem;
            }
            .footer-links a {
                display: inline-block;
                margin: 5px;
            }
        }
        @media (max-width: 480px) {
            .islamic-welcome h1 {
                font-size: 1.2rem;
            }
            
            .islamic-welcome h2 {
                font-size: 1.3rem;
            }
            
            .prayer-card .prayer-icon {
                font-size: 2rem;
            }
            
            .prayer-card .prayer-name {
                font-size: 1rem;
            }
            
            .prayer-card .prayer-time {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-islamic-green fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#home">
                <i class="fas fa-mosque me-2"></i>
                Islamic Prayer Times
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#landing" data-section="landing">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#prayer-times" data-section="prayer-times">Prayer Times</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#mosque-finder" data-section="mosque-finder">Mosque Finder</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#location-info" data-section="location-info">Location Info</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about" data-section="about">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Main Content -->
    <main class="main-content">
        <!-- Landing Page Section -->
        <section id="landing" class="section active">
            <div class="container">
                <div class="row justify-content-center text-center mb-5">
                    <div class="col-lg-10">
                        <div class="islamic-welcome">
                            <h1 class="arabic-font mb-3">بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيم</h1>
                            <h2 class="mb-4">Islamic Prayer Times & Mosque Finder</h2>
                            <p class="lead">Your complete Islamic companion for prayer times, mosque locations, and location-based services. Stay connected with your faith wherever you are.</p>
                        </div>
                    </div>
                </div>
                <!-- Tools Grid -->
                <div class="row g-4">
                    <div class="col-md-6 col-lg-3">
                        <div class="tool-card" data-section="prayer-times">
                            <div class="tool-icon">
                                <i class="fas fa-pray"></i>
                            </div>
                            <h4 class="tool-title">Prayer Times</h4>
                            <p class="tool-description">Get accurate Namaz timings for your location with 12/24-hour format options</p>
                            <div class="tool-button">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 col-lg-3">
                        <div class="tool-card" data-section="mosque-finder">
                            <div class="tool-icon">
                                <i class="fas fa-mosque"></i>
                            </div>
                            <h4 class="tool-title">Mosque Finder</h4>
                            <p class="tool-description">Find nearby mosques with interactive map and Google Maps directions</p>
                            <div class="tool-button">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 col-lg-3">
                        <div class="tool-card" data-section="location-info">
                            <div class="tool-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <h4 class="tool-title">Location Info</h4>
                            <p class="tool-description">Get detailed information about your current location and local prayer times</p>
                            <div class="tool-button">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 col-lg-3">
                        <div class="tool-card" data-section="about">
                            <div class="tool-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <h4 class="tool-title">About</h4>
                            <p class="tool-description">Learn more about this Islamic app and its features for the Muslim community</p>
                            <div class="tool-button">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Prayer Times Section -->
        <section id="prayer-times" class="section">
            <div class="container">
                <div class="section-header text-center">
                    <h2><i class="fas fa-pray me-3"></i>Prayer Times</h2>
                    <p class="lead">Accurate Namaz timings based on your current location</p>
                </div>
                <!-- Location Loading -->
                <div id="prayer-loading" class="text-center mb-4">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading prayer times...</span>
                    </div>
                    <p class="mt-2">Loading prayer times for your location...</p>
                </div>
                <!-- Location Error -->
                <div id="prayer-error" class="alert alert-warning text-center d-none" role="alert">
                    <h5 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Unable to get your location</h5>
                    <p class="mb-0">Please allow location access to view accurate prayer times for your area.</p>
                </div>
                <!-- Location Card -->
                <div id="prayer-location-card" class="location-card mb-4 d-none">
                    <div class="card-header">
                        <i class="fas fa-map-marker-alt me-2"></i>Current Location
                    </div>
                    <div class="card-body">
                        <p class="mb-0">
                            <strong id="prayer-city">Loading...</strong>, 
                            <span id="prayer-country">Loading...</span>
                        </p>
                        <small class="text-muted">
                            Coordinates: <span id="prayer-coordinates">---, ---</span>
                        </small>
                    </div>
                </div>
                <!-- Time Format Toggle -->
                <div id="prayer-format-toggle" class="text-center time-format-toggle d-none">
                    <div class="form-check form-switch d-inline-block">
                        <input class="form-check-input" type="checkbox" id="timeFormatSwitch" checked>
                        <label class="form-check-label" for="timeFormatSwitch">
                            <span id="timeFormatLabel">24-hour format</span>
                        </label>
                    </div>
                </div>
                <!-- Prayer Times Grid -->
                <div id="prayer-times-grid" class="row g-4 d-none">
                    <div class="col-lg-4 col-md-6">
                        <div class="prayer-card" id="fajr-card">
                            <div class="prayer-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="prayer-name">Fajr</div>
                            <div class="prayer-time" id="fajr-time">--:--</div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="prayer-card" id="dhuhr-card">
                            <div class="prayer-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="prayer-name">Dhuhr</div>
                            <div class="prayer-time" id="dhuhr-time">--:--</div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="prayer-card" id="asr-card">
                            <div class="prayer-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="prayer-name">Asr</div>
                            <div class="prayer-time" id="asr-time">--:--</div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="prayer-card" id="maghrib-card">
                            <div class="prayer-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <div class="prayer-name">Maghrib</div>
                            <div class="prayer-time" id="maghrib-time">--:--</div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="prayer-card" id="isha-card">
                            <div class="prayer-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <div class="prayer-name">Isha</div>
                            <div class="prayer-time" id="isha-time">--:--</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Mosque Finder Section -->
        <section id="mosque-finder" class="section">
            <div class="container">
                <div class="section-header text-center">
                    <h2><i class="fas fa-mosque me-3"></i>Find Nearby Mosques</h2>
                    <p class="lead">Discover mosques in your area with interactive map and directions</p>
                </div>
                <!-- Map Container -->
                <div class="map-container mb-4">
                    <div id="mosque-map" class="position-relative">
                        <div class="position-absolute top-50 start-50 translate-middle text-center" style="z-index: 1000;">
                            <div class="spinner-border text-islamic-green" role="status">
                                <span class="visually-hidden">Loading map...</span>
                            </div>
                            <p class="mt-2">Loading map...</p>
                        </div>
                    </div>
                </div>
                <!-- Mosque List -->
                <div id="mosque-list" class="row g-3">
                    <!-- Mosque items will be populated here -->
                </div>
            </div>
        </section>
        <!-- Location Info Section -->
        <section id="location-info" class="section">
            <div class="container">
                <div class="section-header text-center mb-5">
                    <h2><i class="fas fa-map-marker-alt me-3"></i>Location Information</h2>
                    <p class="lead">Detailed information about your current location and prayer times</p>
                </div>
                <!-- Location Loading -->
                <div id="location-loading-section" class="text-center">
                    <div class="spinner-border text-islamic-green mb-3" role="status">
                        <span class="visually-hidden">Getting location information...</span>
                    </div>
                    <p>Getting your location information...</p>
                </div>
                <!-- Location Info Content -->
                <div id="location-info-section" class="d-none">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-map-marker-alt me-2"></i>Location Details
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <strong>City:</strong> <span id="user-city-section">Loading...</span>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Country:</strong> <span id="user-country-section">Loading...</span>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Latitude:</strong> <span id="user-lat-section">Loading...</span>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Longitude:</strong> <span id="user-lng-section">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-pray me-2"></i>Today's Prayer Times
                                </div>
                                <div class="card-body" id="location-prayer-times">
                                    <p>Loading prayer times...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- About Section -->
        <section id="about" class="section">
            <div class="container">
                <div class="section-header text-center">
                    <h2><i class="fas fa-info-circle me-3"></i>About This App</h2>
                    <p class="lead">Your comprehensive Islamic companion for prayer times and mosque locations</p>
                </div>
                <div class="row g-4">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-heart me-2"></i>Purpose & Mission
                            </div>
                            <div class="card-body">
                                <p>This Islamic Prayer Times app is designed to help Muslims around the world maintain their connection with Allah by providing accurate prayer times and mosque locations. Our mission is to make it easier for the Muslim community to fulfill their religious obligations regardless of their location.</p>
                                
                                <h5 class="mt-4">Key Features:</h5>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-check-circle text-success me-2"></i>Accurate prayer times based on your precise location</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i>Interactive mosque finder with map integration</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i>12-hour and 24-hour time format options</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i>Location-based services for travelers</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i>Responsive design for all devices</li>
                                </ul>
                                <h5 class="mt-4">Prayer Calculation Method:</h5>
                                <p>Prayer times are calculated using the Islamic Society of North America (ISNA) calculation method, which is widely accepted and used by Muslim communities worldwide. The calculations take into account your precise geographical coordinates to provide the most accurate prayer times for your location.</p>
                                <h5 class="mt-4">Data Sources:</h5>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-external-link-alt text-primary me-2"></i>Prayer times: Aladhan.com API</li>
                                    <li><i class="fas fa-external-link-alt text-primary me-2"></i>Location data: OpenStreetMap</li>
                                    <li><i class="fas fa-external-link-alt text-primary me-2"></i>Mosque locations: OpenStreetMap Overpass API</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="quick-stats">
                            <h5 class="text-center text-islamic-green mb-4">Quick Stats</h5>
                            <div class="row text-center">
                                <div class="col-6">
                                    <div class="stat-item">
                                        <div class="stat-icon">
                                            <i class="fas fa-pray"></i>
                                        </div>
                                        <div class="stat-number">5</div>
                                        <div class="stat-label">Daily Prayers</div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="stat-item">
                                        <div class="stat-icon">
                                            <i class="fas fa-mosque"></i>
                                        </div>
                                        <div class="stat-number">∞</div>
                                        <div class="stat-label">Mosques Worldwide</div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="stat-item">
                                        <div class="stat-icon">
                                            <i class="fas fa-globe"></i>
                                        </div>
                                        <div class="stat-number">195</div>
                                        <div class="stat-label">Countries</div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="stat-item">
                                        <div class="stat-icon">
                                            <i class="fas fa-users"></i>
                                        </div>
                                        <div class="stat-number">1.8B</div>
                                        <div class="stat-label">Muslims Worldwide</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <!-- Footer -->
    <footer class="bg-islamic-green text-white py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 arabic-font">"وَأَقِيمُوا الصَّلَاةَ وَآتُوا الزَّكَاةَ وَارْكَعُوا مَعَ الرَّاكِعِينَ"</p>
                    <small class="text-light">"And establish prayer and give zakah and bow with those who bow." - Quran 2:43</small>
                </div>
                <div class="col-md-6 text-md-end footer-links">
                    <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms of Service</a>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#disclaimerModal">Disclaimer</a>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#cookiesModal">Cookie Policy</a>
                    <small>&copy; 2025 Islamic Prayer Times App</small>
                </div>
            </div>
        </div>
    </footer>
    <!-- Legal Modals -->
    <!-- Privacy Policy Modal -->
    <div class="modal fade legal-modal" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel"><i class="fas fa-shield-alt me-2"></i>Privacy Policy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h5>1. Information We Collect</h5>
                    <p>Our Islamic Prayer Times app collects limited information to provide you with accurate prayer times and mosque locations:</p>
                    <ul>
                        <li><strong>Location Data:</strong> We collect your device's geographical coordinates to calculate accurate prayer times and find nearby mosques.</li>
                        <li><strong>Usage Data:</strong> We may collect information about how you interact with our app to improve user experience.</li>
                        <li><strong>Device Information:</strong> We collect device type and browser information for compatibility purposes.</li>
                    </ul>
                    
                    <h5>2. How We Use Your Information</h5>
                    <p>We use the collected information solely for the purpose of providing and improving our services:</p>
                    <ul>
                        <li>To calculate accurate prayer times based on your location</li>
                        <li>To locate mosques near your current position</li>
                        <li>To improve app functionality and user experience</li>
                        <li>To provide customer support</li>
                    </ul>
                    
                    <h5>3. Data Storage and Security</h5>
                    <p>We prioritize the security of your information:</p>
                    <ul>
                        <li>Location data is processed in real-time and not stored on our servers</li>
                        <li>We implement appropriate security measures to protect your information</li>
                        <li>We do not sell or share your personal information with third parties</li>
                    </ul>
                    
                    <h5>4. Your Rights</h5>
                    <p>You have the right to:</p>
                    <ul>
                        <li>Access the personal information we hold about you</li>
                        <li>Request correction of inaccurate information</li>
                        <li>Request deletion of your personal data</li>
                        <li>Opt-out of data collection (though this may limit app functionality)</li>
                    </ul>
                    
                    <h5>5. Changes to This Policy</h5>
                    <p>We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.</p>
                    
                    <p class="mt-4"><strong>Last Updated:</strong> January 1, 2025</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Terms of Service Modal -->
    <div class="modal fade legal-modal" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel"><i class="fas fa-file-contract me-2"></i>Terms of Service</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h5>1. Acceptance of Terms</h5>
                    <p>By accessing and using the Islamic Prayer Times app, you accept and agree to be bound by the terms and provision of this agreement.</p>
                    
                    <h5>2. Use License</h5>
                    <p>Permission is granted to temporarily use the Islamic Prayer Times app for personal, non-commercial transitory viewing only.</p>
                    
                    <h5>3. Disclaimer</h5>
                    <p>The prayer times and mosque locations are provided for informational purposes only. While we strive to provide accurate information, we cannot guarantee the absolute accuracy of prayer times or mosque locations.</p>
                    
                    <h5>4. Limitations</h5>
                    <p>In no event shall Islamic Prayer Times or its suppliers be liable for any damages arising out of the use or inability to use the services provided by the app.</p>
                    
                    <h5>5. Accuracy of Materials</h5>
                    <p>The materials appearing in the Islamic Prayer Times app could include technical, typographical, or photographic errors. We do not warrant that any of the materials on its app are accurate, complete or current.</p>
                    
                    <h5>6. Modifications</h5>
                    <p>Islamic Prayer Times may revise these terms of service for its app at any time without notice. By using this app you are agreeing to be bound by the then current version of these terms of service.</p>
                    
                    <h5>7. Governing Law</h5>
                    <p>These terms and conditions are governed by and construed in accordance with the laws and any disputes relating to these terms and conditions will be subject to the exclusive jurisdiction of the courts.</p>
                    
                    <p class="mt-4"><strong>Last Updated:</strong> January 1, 2025</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Disclaimer Modal -->
    <div class="modal fade legal-modal" id="disclaimerModal" tabindex="-1" aria-labelledby="disclaimerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="disclaimerModalLabel"><i class="fas fa-exclamation-circle me-2"></i>Disclaimer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h5>1. Prayer Times Accuracy</h5>
                    <p>The prayer times provided by this app are calculated using established mathematical formulas and are based on your geographical location. While we strive to provide accurate prayer times, actual prayer times may vary slightly based on local customs, mosque announcements, and other factors. Users are advised to confirm prayer times with their local mosque for religious obligations.</p>
                    
                    <h5>2. Mosque Locations</h5>
                    <p>The mosque locations are sourced from OpenStreetMap and may not be comprehensive or completely accurate. The inclusion or exclusion of any mosque does not represent an endorsement or criticism of that institution. We recommend verifying mosque information before visiting.</p>
                    
                    <h5>3. Religious Considerations</h5>
                    <p>This app is intended as a helpful tool for Muslims but should not replace religious knowledge or guidance from qualified scholars. Users are responsible for ensuring their prayers and religious practices comply with their understanding of Islamic requirements.</p>
                    
                    <h5>4. Technical Limitations</h5>
                    <p>The accuracy of location-based services depends on your device's capabilities and connectivity. Results may vary based on GPS accuracy, network availability, and other technical factors beyond our control.</p>
                    
                    <h5>5. No Warranty</h5>
                    <p>The Islamic Prayer Times app is provided "as is" without any warranties, expressed or implied. We make no guarantees regarding the availability, accuracy, or reliability of the services.</p>
                    
                    <h5>6. Limitation of Liability</h5>
                    <p>In no event shall the creators of this app be liable for any missed prayers, religious obligations, or any direct, indirect, incidental, special, or consequential damages arising from the use of or inability to use the app.</p>
                    
                    <p class="mt-4"><strong>Last Updated:</strong> January 1, 2025</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Cookie Policy Modal -->
    <div class="modal fade legal-modal" id="cookiesModal" tabindex="-1" aria-labelledby="cookiesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cookiesModalLabel"><i class="fas fa-cookie-bite me-2"></i>Cookie Policy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h5>1. What Are Cookies</h5>
                    <p>Cookies are small text files that are stored on your device when you visit websites or use web applications. They are widely used to make websites work efficiently and provide information to the owners of the site.</p>
                    
                    <h5>2. How We Use Cookies</h5>
                    <p>Our Islamic Prayer Times app uses cookies for the following purposes:</p>
                    <ul>
                        <li><strong>Essential Cookies:</strong> These are necessary for the app to function properly. They enable core functionality such as location services and prayer time calculations.</li>
                        <li><strong>Preference Cookies:</strong> These remember your choices such as time format preferences (12-hour or 24-hour format).</li>
                        <li><strong>Analytical Cookies:</strong> These help us understand how users interact with our app, allowing us to improve its functionality and user experience.</li>
                    </ul>
                    
                    <h5>3. Third-Party Cookies</h5>
                    <p>We may use services from third parties that place cookies on your device:</p>
                    <ul>
                        <li><strong>Mapping Services:</strong> Our mosque finder feature uses OpenStreetMap which may place cookies for functionality.</li>
                        <li><strong>Analytics Services:</strong> We use analytics services to understand how our app is being used and to make improvements.</li>
                    </ul>
                    
                    <h5>4. Managing Cookies</h5>
                    <p>You can control and manage cookies in various ways:</p>
                    <ul>
                        <li>Most browsers allow you to refuse cookies or delete them. You can usually find these settings in your browser's "options" or "preferences" menu.</li>
                        <li>Please note that disabling cookies may affect the functionality of our app and many other websites that you visit.</li>
                    </ul>
                    
                    <h5>5. Consent</h5>
                    <p>By using our app, you consent to the use of cookies in accordance with this Cookie Policy. If you do not agree to our use of cookies, you should adjust your browser settings appropriately or discontinue use of our app.</p>
                    
                    <h5>6. Changes to This Policy</h5>
                    <p>We may update our Cookie Policy from time to time. We will notify you of any changes by posting the new Cookie Policy on this page.</p>
                    
                    <p class="mt-4"><strong>Last Updated:</strong> January 1, 2025</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Leaflet JS for Maps -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // Islamic Prayer Times App - JavaScript
        class IslamicApp {
            constructor() {
                this.userLocation = null;
                this.map = null;
                this.mosqueMarkers = [];
                this.prayerTimes = null;
                this.is24HourFormat = true;
                
                this.init();
            }
            init() {
                this.setupEventListeners();
                this.startClock();
                this.detectLocation();
            }
            setupEventListeners() {
                // Navigation
                document.querySelectorAll('[data-section]').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const sectionId = e.target.getAttribute('data-section') || e.target.closest('[data-section]').getAttribute('data-section');
                        this.showSection(sectionId);
                        
                        // Update active nav only for nav links
                        if (e.target.classList.contains('nav-link')) {
                            this.updateActiveNav(e.target);
                        } else {
                            // Update nav for tool cards
                            const navLink = document.querySelector(`[data-section="${sectionId}"].nav-link`);
                            if (navLink) {
                                this.updateActiveNav(navLink);
                            }
                        }
                    });
                });
                // Time format toggle
                const timeFormatSwitch = document.getElementById('timeFormatSwitch');
                if (timeFormatSwitch) {
                    // Load saved preference
                    const savedFormat = localStorage.getItem('timeFormat');
                    this.is24HourFormat = savedFormat ? savedFormat === '24' : true;
                    timeFormatSwitch.checked = this.is24HourFormat;
                    this.updateTimeFormatLabel();
                    timeFormatSwitch.addEventListener('change', (e) => {
                        this.is24HourFormat = e.target.checked;
                        localStorage.setItem('timeFormat', this.is24HourFormat ? '24' : '12');
                        this.updateTimeFormatLabel();
                        if (this.prayerTimes) {
                            this.displayPrayerTimes();
                        }
                    });
                }
                // Handle initial hash
                if (window.location.hash) {
                    const sectionId = window.location.hash.substring(1);
                    this.showSection(sectionId);
                } else {
                    // Default to landing page
                    this.showSection('landing');
                }
            }
            showSection(sectionId) {
                // Hide all sections
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                // Show target section
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                    
                    // Load section-specific content
                    if (sectionId === 'prayer-times' && this.userLocation && !this.prayerTimes) {
                        this.loadPrayerTimes();
                    } else if (sectionId === 'mosque-finder' && this.userLocation) {
                        this.loadMosques();
                    } else if (sectionId === 'location-info') {
                        this.loadLocationPrayerTimes();
                    }
                }
                // Update URL hash
                window.location.hash = sectionId;
            }
            updateActiveNav(activeLink) {
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                activeLink.classList.add('active');
            }
            updateTimeFormatLabel() {
                const label = document.getElementById('timeFormatLabel');
                if (label) {
                    label.textContent = this.is24HourFormat ? '24-hour format' : '12-hour format';
                }
            }
            startClock() {
                this.updateClock();
                setInterval(() => this.updateClock(), 1000);
            }
            updateClock() {
                const now = new Date();
                const timeElement = document.getElementById('current-time');
                const dateElement = document.getElementById('current-date');
                
                if (timeElement) {
                    timeElement.textContent = now.toLocaleTimeString('en-US', {
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        hour12: true
                    });
                }
                
                if (dateElement) {
                    dateElement.textContent = now.toLocaleDateString('en-US', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                }
            }
            detectLocation() {
                if (!navigator.geolocation) {
                    this.showLocationError('Geolocation is not supported by this browser.');
                    return;
                }
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        this.userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        this.getReverseGeocoding();
                    },
                    (error) => {
                        let errorMessage = 'Unable to get your location.';
                        
                        switch (error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = 'Location access denied. Please enable location services.';
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = 'Location information is unavailable.';
                                break;
                            case error.TIMEOUT:
                                errorMessage = 'Location request timed out.';
                                break;
                        }
                        
                        this.showLocationError(errorMessage);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 60000
                    }
                );
            }
            async getReverseGeocoding() {
                try {
                    const response = await fetch(
                        `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${this.userLocation.lat}&longitude=${this.userLocation.lng}&localityLanguage=en`
                    );
                    const data = await response.json();
                    
                    this.userLocation.city = data.city || data.locality || 'Unknown';
                    this.userLocation.country = data.countryName || 'Unknown';
                    
                    this.displayLocationInfo();
                } catch (error) {
                    console.error('Error getting location details:', error);
                    this.userLocation.city = 'Unknown';
                    this.userLocation.country = 'Unknown';
                    this.displayLocationInfo();
                }
            }
            displayLocationInfo() {
                const loadingSection = document.getElementById('location-loading-section');
                const infoSection = document.getElementById('location-info-section');
                
                if (loadingSection) loadingSection.classList.add('d-none');
                if (infoSection) infoSection.classList.remove('d-none');
                
                // Update location info
                this.updateElementText('user-city-section', this.userLocation.city);
                this.updateElementText('user-country-section', this.userLocation.country);
                this.updateElementText('user-lat-section', this.userLocation.lat.toFixed(6));
                this.updateElementText('user-lng-section', this.userLocation.lng.toFixed(6));
            }
            updateElementText(elementId, text) {
                const element = document.getElementById(elementId);
                if (element) {
                    element.textContent = text;
                }
            }
            showLocationError(message) {
                document.getElementById('prayer-loading')?.classList.add('d-none');
                document.getElementById('prayer-error')?.classList.remove('d-none');
                
                const errorElement = document.getElementById('prayer-error');
                if (errorElement) {
                    errorElement.innerHTML = `
                        <h5 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Location Error</h5>
                        <p class="mb-0">${message}</p>
                    `;
                }
            }
            async loadPrayerTimes() {
                if (!this.userLocation) return;
                try {
                    const response = await fetch(
                        `https://api.aladhan.com/v1/timings/date-string?latitude=${this.userLocation.lat}&longitude=${this.userLocation.lng}&method=2`
                    );
                    const data = await response.json();
                    
                    if (data.code === 200) {
                        this.prayerTimes = data.data.timings;
                        this.displayPrayerTimes();
                    } else {
                        throw new Error('Failed to load prayer times');
                    }
                } catch (error) {
                    console.error('Error loading prayer times:', error);
                    this.showPrayerTimesError();
                }
            }
            displayPrayerTimes() {
                if (!this.prayerTimes) return;
                // Hide loading, show content
                document.getElementById('prayer-loading')?.classList.add('d-none');
                document.getElementById('prayer-location-card')?.classList.remove('d-none');
                document.getElementById('prayer-format-toggle')?.classList.remove('d-none');
                document.getElementById('prayer-times-grid')?.classList.remove('d-none');
                // Update location info
                this.updateElementText('prayer-city', this.userLocation.city);
                this.updateElementText('prayer-country', this.userLocation.country);
                this.updateElementText('prayer-coordinates', 
                    `${this.userLocation.lat.toFixed(4)}, ${this.userLocation.lng.toFixed(4)}`);
                // Update prayer times
                const prayers = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
                prayers.forEach(prayer => {
                    const timeElement = document.getElementById(`${prayer}-time`);
                    if (timeElement && this.prayerTimes[prayer.charAt(0).toUpperCase() + prayer.slice(1)]) {
                        const time = this.prayerTimes[prayer.charAt(0).toUpperCase() + prayer.slice(1)];
                        timeElement.textContent = this.formatTime(time);
                    }
                });
            }
            formatTime(timeString) {
                const [hours, minutes] = timeString.split(':');
                const date = new Date();
                date.setHours(parseInt(hours), parseInt(minutes));
                if (this.is24HourFormat) {
                    return timeString;
                } else {
                    return date.toLocaleTimeString('en-US', {
                        hour: 'numeric',
                        minute: '2-digit',
                        hour12: true
                    });
                }
            }
            showPrayerTimesError() {
                document.getElementById('prayer-loading')?.classList.add('d-none');
                document.getElementById('prayer-error')?.classList.remove('d-none');
            }
            async loadMosques() {
                if (!this.userLocation || this.map) return;
                this.initializeMap();
                
                try {
                    const overpassQuery = `
                        [out:json][timeout:25];
                        (
                          node["amenity"="place_of_worship"]["religion"="muslim"](around:5000,${this.userLocation.lat},${this.userLocation.lng});
                          way["amenity"="place_of_worship"]["religion"="muslim"](around:5000,${this.userLocation.lat},${this.userLocation.lng});
                          relation["amenity"="place_of_worship"]["religion"="muslim"](around:5000,${this.userLocation.lat},${this.userLocation.lng});
                        );
                        out center;
                    `;
                    const response = await fetch('https://overpass-api.de/api/interpreter', {
                        method: 'POST',
                        body: overpassQuery,
                        headers: {
                            'Content-Type': 'text/plain',
                        }
                    });
                    const data = await response.json();
                    this.displayMosques(data.elements);
                } catch (error) {
                    console.error('Error loading mosques:', error);
                }
            }
            initializeMap() {
                const mapContainer = document.getElementById('mosque-map');
                if (!mapContainer || this.map) return;
                // Clear loading indicator
                mapContainer.innerHTML = '';
                this.map = L.map('mosque-map').setView([this.userLocation.lat, this.userLocation.lng], 13);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors'
                }).addTo(this.map);
                // Add user location marker
                L.marker([this.userLocation.lat, this.userLocation.lng], {
                    icon: L.divIcon({
                        html: '<i class="fas fa-user-circle" style="color: #d4af37; font-size: 24px;"></i>',
                        iconSize: [30, 30],
                        className: 'custom-div-icon'
                    })
                }).addTo(this.map).bindPopup('Your Location');
            }
            displayMosques(mosques) {
                const mosqueList = document.getElementById('mosque-list');
                if (!mosqueList) return;
                mosqueList.innerHTML = '';
                this.mosqueMarkers = [];
                mosques.forEach((mosque, index) => {
                    const lat = mosque.lat || (mosque.center ? mosque.center.lat : null);
                    const lng = mosque.lon || (mosque.center ? mosque.center.lon : null);
                    
                    if (!lat || !lng) return;
                    const name = mosque.tags?.name || 'Unnamed Mosque';
                    const address = mosque.tags?.addr || mosque.tags?.address || 'Address not available';
                    const distance = this.calculateDistance(this.userLocation.lat, this.userLocation.lng, lat, lng);
                    // Add marker to map
                    const marker = L.marker([lat, lng], {
                        icon: L.divIcon({
                            html: '<i class="fas fa-mosque" style="color: #2d5a3d; font-size: 20px;"></i>',
                            iconSize: [25, 25],
                            className: 'custom-div-icon'
                        })
                    }).addTo(this.map);
                    marker.bindPopup(`
                        <div class="mosque-popup-title">${name}</div>
                        <div class="mosque-popup-address">${address}</div>
                        <div class="mosque-popup-distance">${distance.toFixed(1)} km away</div>
                    `);
                    this.mosqueMarkers.push(marker);
                    // Add to list
                    const mosqueElement = document.createElement('div');
                    mosqueElement.className = 'col-md-6 col-lg-4';
                    mosqueElement.innerHTML = `
                        <div class="mosque-item" onclick="islamicApp.focusOnMosque(${index})">
                            <div class="mosque-name">${name}</div>
                            <div class="mosque-address">${address}</div>
                            <div class="mosque-distance">${distance.toFixed(1)} km away</div>
                            <div class="mosque-actions mt-2">
                                <a href="https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}" 
                                   target="_blank" class="btn btn-sm btn-primary me-2">
                                    <i class="fas fa-directions me-1"></i>Directions
                                </a>
                            </div>
                        </div>
                    `;
                    mosqueList.appendChild(mosqueElement);
                });
                if (mosques.length === 0) {
                    mosqueList.innerHTML = '<div class="col-12 text-center"><p>No mosques found in your area.</p></div>';
                }
            }
            focusOnMosque(index) {
                if (this.mosqueMarkers[index] && this.map) {
                    this.map.setView(this.mosqueMarkers[index].getLatLng(), 16);
                    this.mosqueMarkers[index].openPopup();
                }
            }
            calculateDistance(lat1, lng1, lat2, lng2) {
                const R = 6371; // Earth's radius in km
                const dLat = this.deg2rad(lat2 - lat1);
                const dLng = this.deg2rad(lng2 - lng1);
                const a = 
                    Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(this.deg2rad(lat1)) * Math.cos(this.deg2rad(lat2)) * 
                    Math.sin(dLng/2) * Math.sin(dLng/2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                return R * c;
            }
            deg2rad(deg) {
                return deg * (Math.PI/180);
            }
            async loadLocationPrayerTimes() {
                if (!this.userLocation) return;
                const prayerTimesContainer = document.getElementById('location-prayer-times');
                if (!prayerTimesContainer) return;
                try {
                    const response = await fetch(
                        `https://api.aladhan.com/v1/timings/date-string?latitude=${this.userLocation.lat}&longitude=${this.userLocation.lng}&method=2`
                    );
                    const data = await response.json();
                    
                    if (data.code === 200) {
                        const timings = data.data.timings;
                        const prayers = [
                            { name: 'Fajr', time: timings.Fajr, icon: 'fas fa-sun' },
                            { name: 'Dhuhr', time: timings.Dhuhr, icon: 'fas fa-sun' },
                            { name: 'Asr', time: timings.Asr, icon: 'fas fa-sun' },
                            { name: 'Maghrib', time: timings.Maghrib, icon: 'fas fa-moon' },
                            { name: 'Isha', time: timings.Isha, icon: 'fas fa-moon' }
                        ];
                        prayerTimesContainer.innerHTML = prayers.map(prayer => `
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span><i class="${prayer.icon} me-2"></i>${prayer.name}</span>
                                <strong>${this.formatTime(prayer.time)}</strong>
                            </div>
                        `).join('');
                    }
                } catch (error) {
                    console.error('Error loading location prayer times:', error);
                    prayerTimesContainer.innerHTML = '<p class="text-danger">Error loading prayer times.</p>';
                }
            }
        }
        // Initialize the app
        const islamicApp = new IslamicApp();
    </script>
</body>
</html>
