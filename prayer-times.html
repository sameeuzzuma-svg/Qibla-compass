<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Times - Accurate Islamic Salah Times | SunnahWise</title>
    <meta name="description"
        content="Get accurate Islamic prayer times (salah/namaz) for your location. Calculate Fajr, Dhuhr, Asr, Maghrib, and Isha times with multiple calculation methods. Set prayer reminders and notifications.">
    <meta name="keywords"
        content="prayer times, salah times, namaz times, Islamic prayer times, daily prayer schedule, fajr time, dhuhr time, asr time, maghrib time, isha time, muslim prayer times, prayer notifications">
    <meta name="author" content="SunnahWise">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://sunnahwise.com/prayer-times" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Prayer Times - Accurate Islamic Salah Times | SunnahWise">
    <meta property="og:description" content="Get accurate Islamic prayer times for your location with prayer reminders and notifications.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sunnahwise.com/prayer-times">
    <meta property="og:image" content="https://sunnahwise.com/images/prayer-times-og.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Prayer Times - Accurate Islamic Salah Times | SunnahWise">
    <meta name="twitter:description" content="Get accurate Islamic prayer times for your location with prayer reminders and notifications.">
    <meta name="twitter:image" content="https://sunnahwise.com/images/prayer-times-twitter.jpg">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <style>
        /* Islamic Prayer Times App - Custom Styles */
        :root {
            --islamic-green: #2d5a3d;
            --islamic-green-light: #4a8061;
            --islamic-gold: #d4af37;
            --islamic-gold-light: #f4d03f;
            --text-dark: #2c3e50;
            --text-light: #ecf0f1;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.15);
            --gradient-green: linear-gradient(135deg, var(--islamic-green), var(--islamic-green-light));
            --gradient-gold: linear-gradient(135deg, var(--islamic-gold), var(--islamic-gold-light));
        }

        /* Base Styles */
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding-top: 76px;
        }

        .arabic-font {
            font-family: 'Amiri', serif;
            font-weight: 700;
        }

        /* Navigation */
        .bg-islamic-green {
            background: var(--gradient-green) !important;
            box-shadow: 0 2px 20px var(--shadow-medium);
        }

        .navbar-brand {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .navbar-nav .nav-link {
            font-weight: 500;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
            border-radius: 25px;
            padding: 0.5rem 1rem !important;
        }

        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Section Header */
        .section-header {
            margin-bottom: 3rem;
        }

        .section-header h1 {
            color: var(--islamic-green);
            font-weight: 700;
            margin-bottom: 1rem;
        }

        /* Location Card */
        .location-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: transform 0.3s ease;
        }

        .location-card:hover {
            transform: translateY(-5px);
        }

        .location-card .card-header {
            background: var(--gradient-green);
            color: white;
            font-weight: 600;
            padding: 1rem 1.5rem;
            border: none;
        }

        .location-card .card-body {
            padding: 1.5rem;
        }

        /* Prayer Time Cards */
        .prayer-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            height: 100%;
        }

        .prayer-card:hover {
            transform: translateY(-5px);
            border-color: var(--islamic-gold);
            box-shadow: 0 15px 35px var(--shadow-medium);
        }

        .prayer-card .prayer-icon {
            font-size: 2.5rem;
            color: var(--islamic-green);
            margin-bottom: 1rem;
        }

        .prayer-card .prayer-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
        }

        .prayer-card .prayer-time {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--islamic-gold);
            font-family: 'Roboto', monospace;
        }

        .prayer-card.current-prayer {
            background: var(--gradient-green);
            color: white;
        }

        .prayer-card.current-prayer .prayer-icon,
        .prayer-card.current-prayer .prayer-name {
            color: white;
        }

        .prayer-card.current-prayer .prayer-time {
            color: var(--islamic-gold-light);
        }

        /* Cards */
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            background: var(--gradient-green);
            color: white;
            border: none;
            font-weight: 600;
        }

        /* Alerts */
        .alert {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 15px var(--shadow-light);
        }

        /* Loading Spinners */
        .spinner-border {
            color: var(--islamic-green) !important;
        }

        /* Buttons */
        .btn-primary {
            background: var(--gradient-green);
            border: none;
            border-radius: 25px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: var(--gradient-gold);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-medium);
        }

        /* FAQ Section */
        .faq-item {
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--islamic-green);
            padding-left: 1rem;
        }

        .faq-question {
            font-weight: 600;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            color: var(--text-dark);
            padding-top: 0.5rem;
        }

        /* Content Sections */
        .content-section {
            margin: 3rem 0;
            padding: 2rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-light);
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, #14532d, #166534);
            margin-top: 3rem;
            padding: 3rem 0;
            color: #f8f9fa;
            font-family: 'Roboto', sans-serif;
        }

        footer .container {
            max-width: 1200px;
        }

        .footer-section {
            margin-bottom: 2rem;
        }

        footer .footer-heading {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #fff;
        }

        footer .quran-quote {
            font-size: 1.05rem;
            font-style: italic;
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        footer .quran-translation {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.75);
        }

        .footer-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            padding-bottom: 2px;
        }

        .footer-links a:hover {
            color: #fff;
        }

        .footer-links a::after {
            content: "";
            position: absolute;
            width: 0%;
            height: 2px;
            background: #fff;
            left: 0;
            bottom: 0;
            transition: width 0.3s ease;
        }

        .footer-links a:hover::after {
            width: 100%;
        }

        footer .footer-divider {
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin: 2rem 0;
        }

        footer .footer-bottom {
            text-align: center;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Breadcrumb */
        .breadcrumb {
            background-color: transparent;
            padding: 0.75rem 0;
        }

        .breadcrumb-item a {
            color: var(--islamic-green);
            text-decoration: none;
        }

        .breadcrumb-item.active {
            color: var(--text-dark);
        }

        /* Manual Location Input */
        .manual-location {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px var(--shadow-light);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding-top: 76px;
            }

            .prayer-card {
                margin-bottom: 1rem;
            }

            footer {
                text-align: center;
            }

            .footer-links {
                justify-content: center;
            }

            .footer-section {
                margin-bottom: 2rem;
                padding-bottom: 1.5rem;
                border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            }

            .footer-section:last-child {
                border-bottom: none;
            }

            footer .footer-heading {
                margin-bottom: 0.8rem;
                font-size: 1rem;
            }

            footer .quran-quote {
                font-size: 0.95rem;
            }

            footer .quran-translation {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .prayer-card .prayer-icon {
                font-size: 2rem;
            }

            .prayer-card .prayer-name {
                font-size: 1rem;
            }

            .prayer-card .prayer-time {
                font-size: 1.2rem;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-islamic-green fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-mosque me-2"></i>
                SunnahWise
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="prayer-times.html">Prayer Times</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="mosque-finder.html">Mosque Finder</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="qibla.html">Qibla Finder</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="dhikr.html">Dhikr Counter</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="zakat.html">Zakat Calculator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="container mt-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active">Prayer Times</li>
            </ol>
        </nav>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container py-5">
            <div class="section-header text-center">
                <h1><i class="fas fa-pray me-3"></i>Prayer Times</h1>
                <p class="lead">Accurate Islamic prayer times (salah/namaz) for your location with prayer reminders</p>
            </div>

            <!-- Introduction Content -->
            <div class="content-section">
                <h2>Accurate Prayer Times for Your Location</h2>
                <p>Prayer (Salah) is one of the five pillars of Islam and holds immense importance in the life of a Muslim. The Quran emphasizes the significance of prayer in numerous verses, including:</p>
                <blockquote class="blockquote text-center my-4">
                    <p class="arabic-font mb-0">"وَأَقِيمُوا الصَّلَاةَ وَآتُوا الزَّكَاةَ وَارْكَعُوا مَعَ الرَّاكِعِينَ"</p>
                    <footer class="blockquote-footer mt-2">"And establish prayer and give zakah and bow with those who bow." <cite title="Source Title">Quran 2:43</cite></footer>
                </blockquote>
                <p>Our prayer times calculator uses your precise location to provide accurate salah times based on established calculation methods used by Islamic authorities worldwide. You can also enable notifications to receive reminders for each prayer time.</p>
            </div>

            <!-- Location Loading -->
            <div id="prayer-loading" class="text-center mb-4">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading prayer times...</span>
                </div>
                <p class="mt-2">Detecting your location and loading prayer times...</p>
            </div>

            <!-- Location Error -->
            <div id="prayer-error" class="alert alert-warning text-center d-none" role="alert">
                <h5 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Unable to get your location automatically</h5>
                <p class="mb-3">Please allow location access or enter your location manually below.</p>
                <button class="btn btn-primary mt-2" onclick="retryLocation()">Retry Auto-Detection</button>
            </div>

            <!-- Manual Location Input -->
            <div id="manual-location" class="manual-location d-none">
                <h5><i class="fas fa-map-marker-alt me-2"></i>Enter Your Location Manually</h5>
                <div class="row g-3">
                    <div class="col-md-4">
                        <label for="cityInput" class="form-label">City</label>
                        <input type="text" class="form-control" id="cityInput" placeholder="Enter city name">
                    </div>
                    <div class="col-md-4">
                        <label for="countryInput" class="form-label">Country</label>
                        <input type="text" class="form-control" id="countryInput" placeholder="Enter country name">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">&nbsp;</label>
                        <button class="btn btn-primary w-100" onclick="useManualLocation()">Use This Location</button>
                    </div>
                </div>
                <p class="text-muted small mt-2">You can also try these sample locations: 
                    <a href="#" onclick="setSampleLocation('London', 'UK')">London, UK</a> | 
                    <a href="#" onclick="setSampleLocation('Dubai', 'UAE')">Dubai, UAE</a> | 
                    <a href="#" onclick="setSampleLocation('New York', 'USA')">New York, USA</a> | 
                    <a href="#" onclick="setSampleLocation('Istanbul', 'Turkey')">Istanbul, Turkey</a>
                </p>
            </div>

            <!-- Prayer Calculation Method -->
            <div id="calculation-method" class="card mb-4 d-none">
                <div class="card-header">
                    <i class="fas fa-calculator me-2"></i>Calculation Method
                </div>
                <div class="card-body">
                    <p class="text-muted mb-3">Different Islamic authorities use slightly different parameters for calculating prayer times. Choose the method that aligns with your preference or local practice.</p>
                    <select class="form-select" id="methodSelect">
                        <option value="2">Islamic Society of North America (ISNA)</option>
                        <option value="1">University of Islamic Sciences, Karachi</option>
                        <option value="3">Muslim World League</option>
                        <option value="4">Umm Al-Qura University, Makkah</option>
                        <option value="5">Egyptian General Authority of Survey</option>
                        <option value="7">Institute of Geophysics, University of Tehran</option>
                    </select>
                </div>
            </div>

            <!-- Location Card -->
            <div id="prayer-location-card" class="location-card mb-4 d-none">
                <div class="card-header">
                    <i class="fas fa-map-marker-alt me-2"></i>Current Location
                </div>
                <div class="card-body">
                    <p class="mb-0">
                        <strong id="prayer-city">Loading...</strong>,
                        <span id="prayer-country">Loading...</span>
                    </p>
                    <small class="text-muted">
                        Coordinates: <span id="prayer-coordinates">---, ---</span> | 
                        Date: <span id="current-date">---</span>
                    </small>
                </div>
            </div>

            <!-- Time Format Toggle -->
            <div id="prayer-format-toggle" class="text-center mb-4 d-none">
                <div class="form-check form-switch d-inline-block">
                    <input class="form-check-input" type="checkbox" id="timeFormatSwitch" checked>
                    <label class="form-check-label" for="timeFormatSwitch">
                        <span id="timeFormatLabel">24-hour format</span>
                    </label>
                </div>
                
                <!-- Test Notification Button -->
                <button class="btn btn-sm btn-outline-primary ms-3" onclick="testNotification()">
                    <i class="fas fa-bell me-1"></i> Test Notifications
                </button>
            </div>

            <!-- Prayer Times Grid -->
            <div id="prayer-times-grid" class="row g-4 d-none">
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="fajr-card">
                        <div class="prayer-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="prayer-name">Fajr</div>
                        <div class="prayer-time" id="fajr-time">--:--</div>
                        <small class="text-muted">Dawn prayer</small>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="sunrise-card">
                        <div class="prayer-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="prayer-name">Sunrise</div>
                        <div class="prayer-time" id="sunrise-time">--:--</div>
                        <small class="text-muted">Start of daytime</small>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="dhuhr-card">
                        <div class="prayer-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="prayer-name">Dhuhr</div>
                        <div class="prayer-time" id="dhuhr-time">--:--</div>
                        <small class="text-muted">Midday prayer</small>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="asr-card">
                        <div class="prayer-icon">
                            <i class="fas fa-cloud-sun"></i>
                        </div>
                        <div class="prayer-name">Asr</div>
                        <div class="prayer-time" id="asr-time">--:--</div>
                        <small class="text-muted">Afternoon prayer</small>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="maghrib-card">
                        <div class="prayer-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="prayer-name">Maghrib</div>
                        <div class="prayer-time" id="maghrib-time">--:--</div>
                        <small class="text-muted">Sunset prayer</small>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="isha-card">
                        <div class="prayer-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="prayer-name">Isha</div>
                        <div class="prayer-time" id="isha-time">--:--</div>
                        <small class="text-muted">Night prayer</small>
                    </div>
                </div>
            </div>

            <!-- Next Prayer Info -->
            <div id="next-prayer-info" class="card mt-4 d-none">
                <div class="card-header">
                    <i class="fas fa-clock me-2"></i>Next Prayer
                </div>
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h4 id="next-prayer-name" class="text-islamic-green">--</h4>
                            <p class="mb-1">Time remaining:</p>
                            <h3 id="next-prayer-countdown" class="text-islamic-gold">--:--:--</h3>
                        </div>
                        <div class="col-md-6 text-md-end">
                            <p class="mb-1">Scheduled at:</p>
                            <h4 id="next-prayer-time" class="text-islamic-green">--:--</h4>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prayer Notifications -->
            <div id="prayer-notifications" class="card mt-4 d-none">
                <div class="card-header">
                    <i class="fas fa-bell me-2"></i>Prayer Notifications
                </div>
                <div class="card-body">
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="notificationSwitch">
                        <label class="form-check-label" for="notificationSwitch">
                            Enable prayer time notifications
                        </label>
                    </div>
                    <p class="text-muted small" id="notification-status">Notifications will remind you 5 minutes before each prayer time. Please allow notification permissions when prompted.</p>
                </div>
            </div>

            <!-- Importance of Prayer Section -->
            <div class="content-section">
                <h2>The Importance of Prayer in Islam</h2>
                <p>Salah (prayer) is the second pillar of Islam and holds a central position in a Muslim's life. The Prophet Muhammad (peace be upon him) said:</p>
                <blockquote class="blockquote my-4">
                    <p class="mb-0">"The first matter that the slave will be brought to account for on the Day of Judgment is the prayer. If it is sound, then the rest of his deeds will be sound. And if it is bad, then the rest of his deeds will be bad."</p>
                    <footer class="blockquote-footer mt-2">Recorded in Tabarani</footer>
                </blockquote>
                
                <h3>Benefits of Establishing Regular Prayer</h3>
                <ul>
                    <li><strong>Spiritual Connection:</strong> Prayer is a direct means of communication with Allah</li>
                    <li><strong>Discipline:</strong> The five daily prayers instill discipline and time management</li>
                    <li><strong>Purification:</strong> Prayer serves as a means of spiritual purification and forgiveness of sins</li>
                    <li><strong>Community Bonding:</strong> Congregational prayers strengthen community ties</li>
                    <li><strong>Mental Peace:</strong> Regular prayer provides mental tranquility and reduces stress</li>
                </ul>
            </div>

            <!-- FAQ Section -->
            <div class="content-section">
                <h2>Frequently Asked Questions About Prayer Times</h2>
                
                <div class="faq-item">
                    <div class="faq-question" data-bs-toggle="collapse" data-bs-target="#faq1">
                        <span>How are prayer times calculated?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div id="faq1" class="faq-answer collapse show">
                        <p>Prayer times are calculated based on the position of the sun. Each prayer has a specific astronomical position associated with it:</p>
                        <ul>
                            <li><strong>Fajr:</strong> Dawn, when the first light appears on the horizon</li>
                            <li><strong>Dhuhr:</strong> When the sun passes its zenith (highest point)</li>
                            <li><strong>Asr:</strong> When the shadow of an object equals its length (or double depending on the school of thought)</li>
                            <li><strong>Maghrib:</strong> Immediately after sunset</li>
                            <li><strong>Isha:</strong> When darkness falls and the twilight disappears</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" data-bs-toggle="collapse" data-bs-target="#faq2">
                        <span>Why do prayer times vary by location?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div id="faq2" class="faq-answer collapse">
                        <p>Prayer times vary based on geographical location because the sun's position relative to the horizon changes depending on where you are on Earth. Factors that affect prayer times include:</p>
                        <ul>
                            <li>Latitude (distance from the equator)</li>
                            <li>Longitude (east-west position)</li>
                            <li>Altitude (height above sea level)</li>
                            <li>Time of year (seasonal variations)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" data-bs-toggle="collapse" data-bs-target="#faq3">
                        <span>What is the difference between calculation methods?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div id="faq3" class="faq-answer collapse">
                        <p>Different Islamic authorities use slightly different parameters for calculating prayer times, particularly for Fajr and Isha. The main differences are in the angle used to determine when dawn begins and night falls. For example:</p>
                        <ul>
                            <li><strong>Muslim World League:</strong> Uses 18° for Isha and 17° for Fajr</li>
                            <li><strong>Islamic Society of North America (ISNA):</strong> Uses 15° for both Fajr and Isha</li>
                            <li><strong>Umm Al-Qura, Makkah:</strong> Uses 90 minutes after Maghrib for Isha (during Ramadan) and 120 minutes otherwise</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" data-bs-toggle="collapse" data-bs-target="#faq4">
                        <span>Do prayer times change throughout the year?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div id="faq4" class="faq-answer collapse">
                        <p>Yes, prayer times change daily throughout the year due to the Earth's tilt and its orbit around the sun. The changes are more noticeable:</p>
                        <ul>
                            <li>In higher latitudes (closer to the poles)</li>
                            <li>During seasonal transitions (spring and autumn)</li>
                            <li>During summer and winter solstices</li>
                        </ul>
                        <p>This is why it's important to use updated prayer timetables or digital tools that calculate times accurately for each day.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" data-bs-toggle="collapse" data-bs-target="#faq5">
                        <span>How do prayer notifications work?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div id="faq5" class="faq-answer collapse">
                        <p>Our prayer notification system works as follows:</p>
                        <ul>
                            <li>When enabled, the system requests permission to show notifications</li>
                            <li>It calculates prayer times for your specific location</li>
                            <li>Notifications are scheduled 5 minutes before each prayer time</li>
                            <li>The system works even when the browser is closed (if you keep the tab open)</li>
                            <li>You can test notifications using the "Test Notifications" button</li>
                        </ul>
                        <p>Note: Notifications require HTTPS and work best in modern browsers like Chrome, Firefox, Safari, and Edge.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <!-- Quran Quote -->
                <div class="col-md-4 col-12 footer-section">
                    <h5 class="footer-heading">Quran</h5>
                    <p class="quran-quote">
                        "Indeed, prayer has been decreed upon the believers a decree of specified times." 
                    </p>
                    <p class="quran-translation">— Surah An-Nisa 4:103</p>
                </div>

                <!-- Quick Links -->
                <div class="col-md-4 col-12 footer-section">
                    <h5 class="footer-heading">Quick Links</h5>
                    <div class="footer-links">
                        <a href="index.html">Home</a>
                        <a href="prayer-times.html">Prayer Times</a>
                        <a href="mosque-finder.html">Mosque Finder</a>
                        <a href="qibla.html">Qibla Finder</a>
                        <a href="dhikr.html">Dhikr Counter</a>
                        <a href="zakat.html">Zakat Calculator</a>
                        <a href="about.html">About</a>
                    </div>
                </div>

                <!-- Legal -->
                <div class="col-md-4 col-12 footer-section">
                    <h5 class="footer-heading">Legal</h5>
                    <div class="footer-links">
                        <a href="privacy.html">Privacy Policy</a>
                        <a href="terms.html">Terms of Service</a>
                        <a href="disclaimer.html">Disclaimer</a>
                        <a href="cookies.html">Cookie Policy</a>
                        <a href="contact.html">Contact Us</a>
                    </div>
                </div>
            </div>

            <!-- Divider -->
            <div class="footer-divider"></div>

            <!-- Bottom -->
            <div class="footer-bottom">
                <p>© 2025 SunnahWise. All rights reserved.</p>
                <p class="small">Made with ❤️ for the Ummah</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Location Manager Implementation
        window.locationManager = {
            userLocation: null,
            
            getLocation: function() {
                return new Promise((resolve, reject) => {
                    // Try to get from localStorage first
                    const savedLocation = localStorage.getItem('userLocation');
                    if (savedLocation) {
                        this.userLocation = JSON.parse(savedLocation);
                        resolve(this.userLocation);
                        return;
                    }
                    
                    // Try HTML5 Geolocation API
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(
                            (position) => {
                                const lat = position.coords.latitude;
                                const lng = position.coords.longitude;
                                
                                // Use a geocoding service to get city/country name
                                this.geocodeLocation(lat, lng)
                                    .then(locationData => {
                                        this.userLocation = {
                                            lat: lat,
                                            lng: lng,
                                            city: locationData.city,
                                            country: locationData.country
                                        };
                                        
                                        localStorage.setItem('userLocation', JSON.stringify(this.userLocation));
                                        resolve(this.userLocation);
                                    })
                                    .catch(error => {
                                        // If geocoding fails, still use the coordinates
                                        this.userLocation = {
                                            lat: lat,
                                            lng: lng,
                                            city: 'Unknown',
                                            country: 'Unknown'
                                        };
                                        resolve(this.userLocation);
                                    });
                            },
                            (error) => {
                                console.error('Geolocation error:', error);
                                reject(error);
                            },
                            {
                                enableHighAccuracy: true,
                                timeout: 10000,
                                maximumAge: 60000
                            }
                        );
                    } else {
                        reject(new Error('Geolocation is not supported by this browser.'));
                    }
                });
            },
            
            geocodeLocation: function(lat, lng) {
                return new Promise((resolve, reject) => {
                    // Use OpenStreetMap Nominatim API for geocoding
                    fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`)
                        .then(response => response.json())
                        .then(data => {
                            if (data && data.address) {
                                const city = data.address.city || data.address.town || data.address.village || data.address.county || 'Unknown';
                                const country = data.address.country || 'Unknown';
                                resolve({ city, country });
                            } else {
                                reject(new Error('Could not geocode location'));
                            }
                        })
                        .catch(error => {
                            reject(error);
                        });
                });
            },
            
            setManualLocation: function(city, country) {
                return new Promise((resolve) => {
                    // Use a geocoding service to get coordinates from city/country
                    this.geocodeCityCountry(city, country)
                        .then(coords => {
                            this.userLocation = {
                                lat: coords.lat,
                                lng: coords.lng,
                                city: city,
                                country: country
                            };
                            
                            localStorage.setItem('userLocation', JSON.stringify(this.userLocation));
                            resolve(this.userLocation);
                        })
                        .catch(error => {
                            // If geocoding fails, use a default location
                            this.userLocation = {
                                lat: 51.5074, // London default
                                lng: -0.1278,
                                city: city,
                                country: country
                            };
                            resolve(this.userLocation);
                        });
                });
            },
            
            geocodeCityCountry: function(city, country) {
                return new Promise((resolve, reject) => {
                    const query = encodeURIComponent(`${city}, ${country}`);
                    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${query}`)
                        .then(response => response.json())
                        .then(data => {
                            if (data && data.length > 0) {
                                resolve({
                                    lat: parseFloat(data[0].lat),
                                    lng: parseFloat(data[0].lon)
                                });
                            } else {
                                reject(new Error('Location not found'));
                            }
                        })
                        .catch(error => {
                            reject(error);
                        });
                });
            }
        };

        // Prayer Times page functionality
        document.addEventListener('DOMContentLoaded', function () {
            // First, setup event listeners
            setupEventListeners();
            
            // Then get location and load prayer times
            window.locationManager.getLocation()
                .then(() => {
                    loadPrayerTimes();
                })
                .catch((error) => {
                    console.error('Location error:', error);
                    document.getElementById('prayer-loading').classList.add('d-none');
                    document.getElementById('prayer-error').classList.remove('d-none');
                    document.getElementById('manual-location').classList.remove('d-none');
                });
            
            // Request notification permission on page load
            requestNotificationPermission();
            
            // Update current date
            updateCurrentDate();
        });

        function setupEventListeners() {
            // Time format toggle
            const timeFormatSwitch = document.getElementById('timeFormatSwitch');
            if (timeFormatSwitch) {
                const savedFormat = localStorage.getItem('timeFormat');
                const is24HourFormat = savedFormat ? savedFormat === '24' : true;
                timeFormatSwitch.checked = is24HourFormat;
                updateTimeFormatLabel(is24HourFormat);

                timeFormatSwitch.addEventListener('change', (e) => {
                    const is24Hour = e.target.checked;
                    localStorage.setItem('timeFormat', is24Hour ? '24' : '12');
                    updateTimeFormatLabel(is24Hour);
                    if (window.prayerTimes) {
                        displayPrayerTimes(window.prayerTimes, is24Hour);
                    }
                });
            }

            // Calculation method selector
            const methodSelect = document.getElementById('methodSelect');
            if (methodSelect) {
                methodSelect.value = localStorage.getItem('calculationMethod') || '2';
                methodSelect.addEventListener('change', (e) => {
                    localStorage.setItem('calculationMethod', e.target.value);
                    if (window.locationManager.userLocation) {
                        loadPrayerTimes();
                    }
                });
            }

            // Notification toggle
            const notificationSwitch = document.getElementById('notificationSwitch');
            if (notificationSwitch) {
                notificationSwitch.checked = localStorage.getItem('notificationsEnabled') === 'true';
                
                notificationSwitch.addEventListener('change', async (e) => {
                    const enabled = e.target.checked;
                    
                    if (enabled) {
                        const permission = await requestNotificationPermission();
                        if (permission === 'granted') {
                            localStorage.setItem('notificationsEnabled', 'true');
                            schedulePrayerNotifications();
                            updateNotificationStatus('Notifications enabled successfully!');
                        } else {
                            notificationSwitch.checked = false;
                            updateNotificationStatus('Please allow notifications in your browser settings.');
                        }
                    } else {
                        localStorage.setItem('notificationsEnabled', 'false');
                        disableNotifications();
                        updateNotificationStatus('Notifications have been disabled.');
                    }
                });
            }
            
            // FAQ toggle functionality
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', function() {
                    const icon = this.querySelector('i');
                    if (icon.classList.contains('fa-chevron-down')) {
                        icon.classList.replace('fa-chevron-down', 'fa-chevron-up');
                    } else {
                        icon.classList.replace('fa-chevron-up', 'fa-chevron-down');
                    }
                });
            });
        }

        function updateTimeFormatLabel(is24HourFormat) {
            const label = document.getElementById('timeFormatLabel');
            if (label) {
                label.textContent = is24HourFormat ? '24-hour format' : '12-hour format';
            }
        }
        
        function updateCurrentDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);
        }
        
        function updateNotificationStatus(message) {
            const statusElement = document.getElementById('notification-status');
            if (statusElement) {
                statusElement.textContent = message;
            }
        }

        // Notification Functions
        async function requestNotificationPermission() {
            if (!("Notification" in window)) {
                console.log("This browser does not support notifications");
                updateNotificationStatus("Your browser doesn't support notifications.");
                return 'denied';
            }
            
            if (Notification.permission === "granted") {
                return 'granted';
            }
            
            if (Notification.permission === "denied") {
                updateNotificationStatus("Notifications are blocked. Please enable them in your browser settings.");
                return 'denied';
            }
            
            // Request permission from user
            const permission = await Notification.requestPermission();
            return permission;
        }

        function enableNotifications() {
            if (!("Notification" in window)) {
                alert("Your browser doesn't support notifications");
                document.getElementById('notificationSwitch').checked = false;
                return;
            }
            
            if (Notification.permission === "denied") {
                alert("Notifications are blocked. Please enable them in your browser settings.");
                document.getElementById('notificationSwitch').checked = false;
                localStorage.setItem('notificationsEnabled', 'false');
                return;
            }
            
            if (Notification.permission === "default") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        schedulePrayerNotifications();
                        showNotification("Prayer Time Notifications", "Notifications enabled successfully!");
                    } else {
                        document.getElementById('notificationSwitch').checked = false;
                        localStorage.setItem('notificationsEnabled', 'false');
                    }
                });
            } else if (Notification.permission === "granted") {
                schedulePrayerNotifications();
            }
        }

        function disableNotifications() {
            // Clear any scheduled notifications
            if (window.notificationTimeouts) {
                window.notificationTimeouts.forEach(timeout => {
                    clearTimeout(timeout);
                });
                window.notificationTimeouts = [];
            }
        }

        function schedulePrayerNotifications() {
            if (!window.prayerTimes) return;
            
            // Clear existing timeouts
            if (window.notificationTimeouts) {
                window.notificationTimeouts.forEach(timeout => {
                    clearTimeout(timeout);
                });
            }
            
            window.notificationTimeouts = [];
            const now = new Date();
            const currentTime = now.getHours() * 60 + now.getMinutes();
            
            const prayers = [
                { name: 'Fajr', time: window.prayerTimes.Fajr, icon: '🌅' },
                { name: 'Dhuhr', time: window.prayerTimes.Dhuhr, icon: '☀️' },
                { name: 'Asr', time: window.prayerTimes.Asr, icon: '⛅' },
                { name: 'Maghrib', time: window.prayerTimes.Maghrib, icon: '🌇' },
                { name: 'Isha', time: window.prayerTimes.Isha, icon: '🌙' }
            ];
            
            prayers.forEach(prayer => {
                const [hours, minutes] = prayer.time.split(':');
                const prayerTime = parseInt(hours) * 60 + parseInt(minutes);
                
                // Schedule notification 5 minutes before prayer time
                const notificationTime = prayerTime - 5;
                
                let timeUntilNotification = notificationTime - currentTime;
                
                // If notification time has already passed today, schedule for tomorrow
                if (timeUntilNotification < 0) {
                    timeUntilNotification += 24 * 60;
                }
                
                const timeout = setTimeout(() => {
                    showPrayerNotification(prayer.name, prayer.time, prayer.icon);
                }, timeUntilNotification * 60 * 1000);
                
                window.notificationTimeouts.push(timeout);
            });
            
            updateNotificationStatus('Prayer notifications are active. You will be notified 5 minutes before each prayer.');
        }

        function showPrayerNotification(prayerName, prayerTime, icon) {
            if (Notification.permission !== "granted") return;
            
            const title = `${icon} ${prayerName} Prayer Time`;
            const body = `It's time for ${prayerName} prayer. Scheduled at ${prayerTime}`;
            
            const notification = new Notification(title, {
                body: body,
                icon: '/favicon.ico',
                badge: '/favicon.ico',
                tag: 'prayer-time',
                requireInteraction: true,
            });
            
            notification.onclick = function() {
                window.focus();
                notification.close();
            };
            
            // Auto-close after 30 seconds
            setTimeout(() => {
                notification.close();
            }, 30000);
        }

        function showNotification(title, body, options = {}) {
            if (!("Notification" in window)) return;
            
            if (Notification.permission === "granted") {
                const notification = new Notification(title, {
                    body: body,
                    icon: options.icon || '/favicon.ico',
                    ...options
                });
                
                notification.onclick = function() {
                    window.focus();
                    notification.close();
                };
                
                // Auto-close after 10 seconds
                setTimeout(() => {
                    notification.close();
                }, 10000);
                
                return notification;
            }
        }
        
        function testNotification() {
            if (Notification.permission === "granted") {
                showPrayerNotification("Test Prayer", "12:00", "🕌");
            } else {
                requestNotificationPermission().then(permission => {
                    if (permission === 'granted') {
                        showPrayerNotification("Test Prayer", "12:00", "🕌");
                    }
                });
            }
        }

        async function loadPrayerTimes() {
            const location = window.locationManager.userLocation;
            if (!location) {
                document.getElementById('prayer-loading').classList.add('d-none');
                document.getElementById('prayer-error').classList.remove('d-none');
                document.getElementById('manual-location').classList.remove('d-none');
                return;
            }

            try {
                const method = document.getElementById('methodSelect').value || '2';
                const response = await fetch(
                    `https://api.aladhan.com/v1/timings?latitude=${location.lat}&longitude=${location.lng}&method=${method}`
                );
                const data = await response.json();

                if (data.code === 200) {
                    window.prayerTimes = data.data.timings;
                    displayPrayerTimes(data.data.timings);

                    // Show content, hide loading
                    document.getElementById('prayer-loading').classList.add('d-none');
                    document.getElementById('prayer-location-card').classList.remove('d-none');
                    document.getElementById('prayer-format-toggle').classList.remove('d-none');
                    document.getElementById('prayer-times-grid').classList.remove('d-none');
                    document.getElementById('calculation-method').classList.remove('d-none');
                    document.getElementById('prayer-notifications').classList.remove('d-none');
                    document.getElementById('next-prayer-info').classList.remove('d-none');
                    document.getElementById('manual-location').classList.add('d-none');
                    document.getElementById('prayer-error').classList.add('d-none');

                    // Update location info
                    document.getElementById('prayer-city').textContent = location.city || 'Unknown';
                    document.getElementById('prayer-country').textContent = location.country || 'Unknown';
                    document.getElementById('prayer-coordinates').textContent =
                        `${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}`;
                        
                    // Schedule notifications if enabled
                    if (localStorage.getItem('notificationsEnabled') === 'true') {
                        schedulePrayerNotifications();
                    }
                    
                    // Start countdown for next prayer
                    startPrayerCountdown();
                } else {
                    throw new Error('Failed to load prayer times');
                }
            } catch (error) {
                console.error('Error loading prayer times:', error);
                document.getElementById('prayer-loading').classList.add('d-none');
                document.getElementById('prayer-error').classList.remove('d-none');
                document.getElementById('manual-location').classList.remove('d-none');
            }
        }

        function displayPrayerTimes(prayerTimes, is24HourFormat = null) {
            if (!prayerTimes) return;

            const use24Hour = is24HourFormat !== null ? is24HourFormat :
                (localStorage.getItem('timeFormat') !== '12');

            // Update prayer times
            const prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha', 'Sunrise'];
            prayers.forEach(prayer => {
                const timeElement = document.getElementById(`${prayer.toLowerCase()}-time`);
                if (timeElement && prayerTimes[prayer]) {
                    timeElement.textContent = formatTime(prayerTimes[prayer], use24Hour);
                }
            });

            highlightCurrentPrayer(prayerTimes);
        }

        function formatTime(timeString, is24HourFormat) {
            const [hours, minutes] = timeString.split(':');

            if (is24HourFormat) {
                return `${hours}:${minutes}`;
            } else {
                const date = new Date();
                date.setHours(parseInt(hours), parseInt(minutes));
                return date.toLocaleTimeString('en-US', {
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                });
            }
        }

        function highlightCurrentPrayer(prayerTimes) {
            if (!prayerTimes) return;

            const now = new Date();
            const currentTime = now.getHours() * 60 + now.getMinutes();

            const prayers = [
                { name: 'fajr', time: prayerTimes.Fajr },
                { name: 'dhuhr', time: prayerTimes.Dhuhr },
                { name: 'asr', time: prayerTimes.Asr },
                { name: 'maghrib', time: prayerTimes.Maghrib },
                { name: 'isha', time: prayerTimes.Isha }
            ];

            // Remove current prayer highlighting
            prayers.forEach(prayer => {
                document.getElementById(`${prayer.name}-card`)?.classList.remove('current-prayer');
            });

            // Find current prayer period
            for (let i = 0; i < prayers.length; i++) {
                const [hours, minutes] = prayers[i].time.split(':');
                const prayerTime = parseInt(hours) * 60 + parseInt(minutes);

                const nextIndex = (i + 1) % prayers.length;
                const [nextHours, nextMinutes] = prayers[nextIndex].time.split(':');
                let nextPrayerTime = parseInt(nextHours) * 60 + parseInt(nextMinutes);

                // Handle day transition
                if (nextPrayerTime < prayerTime) {
                    nextPrayerTime += 24 * 60;
                }

                if (currentTime >= prayerTime && currentTime < nextPrayerTime) {
                    document.getElementById(`${prayers[i].name}-card`)?.classList.add('current-prayer');
                    break;
                }
            }
        }
        
        function startPrayerCountdown() {
            if (!window.prayerTimes) return;
            
            function updateCountdown() {
                const now = new Date();
                const currentTime = now.getHours() * 60 + now.getMinutes();
                
                const prayers = [
                    { name: 'Fajr', time: window.prayerTimes.Fajr },
                    { name: 'Dhuhr', time: window.prayerTimes.Dhuhr },
                    { name: 'Asr', time: window.prayerTimes.Asr },
                    { name: 'Maghrib', time: window.prayerTimes.Maghrib },
                    { name: 'Isha', time: window.prayerTimes.Isha }
                ];
                
                let nextPrayer = null;
                let timeUntilNext = 0;
                
                for (let i = 0; i < prayers.length; i++) {
                    const [hours, minutes] = prayers[i].time.split(':');
                    const prayerTime = parseInt(hours) * 60 + parseInt(minutes);
                    
                    if (prayerTime > currentTime) {
                        nextPrayer = prayers[i];
                        timeUntilNext = prayerTime - currentTime;
                        break;
                    }
                }
                
                // If no prayer found for today, use first prayer of tomorrow
                if (!nextPrayer) {
                    nextPrayer = prayers[0];
                    const [hours, minutes] = prayers[0].time.split(':');
                    const prayerTime = parseInt(hours) * 60 + parseInt(minutes);
                    timeUntilNext = (24 * 60 - currentTime) + prayerTime;
                }
                
                // Update display
                document.getElementById('next-prayer-name').textContent = nextPrayer.name;
                document.getElementById('next-prayer-time').textContent = nextPrayer.time;
                
                const hours = Math.floor(timeUntilNext / 60);
                const minutes = timeUntilNext % 60;
                const seconds = 59 - now.getSeconds(); // Approximate seconds
                
                document.getElementById('next-prayer-countdown').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            // Update immediately and then every second
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }
        
        function retryLocation() {
            document.getElementById('prayer-error').classList.add('d-none');
            document.getElementById('prayer-loading').classList.remove('d-none');
            document.getElementById('manual-location').classList.add('d-none');
            
            window.locationManager.getLocation()
                .then(() => {
                    loadPrayerTimes();
                })
                .catch((error) => {
                    document.getElementById('prayer-loading').classList.add('d-none');
                    document.getElementById('prayer-error').classList.remove('d-none');
                    document.getElementById('manual-location').classList.remove('d-none');
                });
        }
        
        function useManualLocation() {
            const city = document.getElementById('cityInput').value.trim();
            const country = document.getElementById('countryInput').value.trim();
            
            if (!city || !country) {
                alert('Please enter both city and country');
                return;
            }
            
            document.getElementById('prayer-loading').classList.remove('d-none');
            document.getElementById('prayer-error').classList.add('d-none');
            document.getElementById('manual-location').classList.add('d-none');
            
            window.locationManager.setManualLocation(city, country)
                .then(() => {
                    loadPrayerTimes();
                })
                .catch((error) => {
                    document.getElementById('prayer-loading').classList.add('d-none');
                    document.getElementById('prayer-error').classList.remove('d-none');
                    document.getElementById('manual-location').classList.remove('d-none');
                });
        }
        
        function setSampleLocation(city, country) {
            document.getElementById('cityInput').value = city;
            document.getElementById('countryInput').value = country;
        }

        // Clear any location data that might have come from URL parameters
        window.addEventListener('load', function () {
            if (window.location.search) {
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        });
    </script>
</body>

</html>
