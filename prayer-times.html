<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Enhanced SEO Meta Tags -->
    <title>Islamic Prayer Times Today | Accurate Salah Schedule & Qibla Direction - SunnahWise</title>
    <meta name="description"
        content="Get precise Islamic prayer times (Fajr, Dhuhr, Asr, Maghrib, Isha) for your location. Features prayer countdown, Islamic calendar, Qibla direction, and notification reminders. Trusted by Muslims worldwide.">
    <meta name="keywords"
        content="prayer times, salah times, daily prayer, today's prayer times, Islamic prayer schedule, namaz times, Muslim prayer, Fajr time, Dhuhr time, Asr time, Maghrib time, Isha time, prayer countdown, Islamic calendar, Hijri date, prayer tracker, prayer analytics, prayer notifications, Qibla direction, mosque finder">
    
    <!-- Enhanced Open Graph tags -->
    <meta property="og:title" content="Islamic Prayer Times Today | Accurate Salah Schedule - SunnahWise">
    <meta property="og:description" content="Get precise Islamic prayer times for your location with countdown timers, Islamic calendar, and prayer tracking. Never miss your daily prayers.">
    <meta property="og:image" content="https://sunnahwise.com/images/prayer-times-og.jpg">
    <meta property="og:url" content="https://sunnahwise.com/prayer-times">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="SunnahWise">
    
    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Islamic Prayer Times Today | SunnahWise">
    <meta name="twitter:description" content="Accurate Islamic prayer times with countdown timers and Islamic calendar integration.">
    <meta name="twitter:image" content="https://sunnahwise.com/images/prayer-times-twitter.jpg">
    
    <!-- Additional SEO tags -->
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="author" content="SunnahWise">
    <meta name="theme-color" content="#2d5a3d">
    <link rel="canonical" href="https://sunnahwise.com/prayer-times" />
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "SunnahWise Prayer Times",
        "description": "Accurate Islamic prayer times calculator with countdown timers and Islamic calendar",
        "url": "https://sunnahwise.com/prayer-times",
        "applicationCategory": "ReligiousApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Accurate prayer times calculation",
            "Prayer countdown timers",
            "Islamic calendar integration",
            "Prayer tracking and analytics",
            "Multiple calculation methods",
            "Prayer notifications",
            "Qibla direction finder"
        ]
    }
    </script>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts - Islamic Style -->
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TN0HH3WV8R"></script>
    <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-TN0HH3WV8R'); </script>

    <style>
        /* Islamic Prayer Times App - Enhanced Custom Styles */
        :root {
            --islamic-green: #2d5a3d;
            --islamic-green-light: #4a8061;
            --islamic-gold: #d4af37;
            --islamic-gold-light: #f4d03f;
            --text-dark: #2c3e50;
            --text-light: #ecf0f1;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.15);
            --gradient-green: linear-gradient(135deg, var(--islamic-green), var(--islamic-green-light));
            --gradient-gold: linear-gradient(135deg, var(--islamic-gold), var(--islamic-gold-light));
            --countdown-bg: #f8f9fa;
            --progress-bg: #e9ecef;
        }

        /* Base Styles */
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding-top: 76px;
        }

        .arabic-font {
            font-family: 'Amiri', serif;
            font-weight: 700;
        }

        /* Navigation */
        .bg-islamic-green {
            background: var(--gradient-green) !important;
            box-shadow: 0 2px 20px var(--shadow-medium);
        }

        .navbar-brand {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .navbar-nav .nav-link {
            font-weight: 500;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
            border-radius: 25px;
            padding: 0.5rem 1rem !important;
        }

        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Section Header */
        .section-header {
            margin-bottom: 3rem;
        }

        .section-header h1 {
            color: var(--islamic-green);
            font-weight: 700;
            margin-bottom: 1rem;
        }

        /* Enhanced Location Card */
        .location-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: transform 0.3s ease;
        }

        .location-card:hover {
            transform: translateY(-5px);
        }

        .location-card .card-header {
            background: var(--gradient-green);
            color: white;
            font-weight: 600;
            padding: 1rem 1.5rem;
            border: none;
        }

        .location-card .card-body {
            padding: 1.5rem;
        }

        /* Enhanced Prayer Time Cards with Countdown */
        .prayer-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .prayer-card:hover {
            transform: translateY(-5px);
            border-color: var(--islamic-gold);
            box-shadow: 0 15px 35px var(--shadow-medium);
        }

        .prayer-card .prayer-icon {
            font-size: 2.5rem;
            color: var(--islamic-green);
            margin-bottom: 1rem;
        }

        .prayer-card .prayer-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
        }

        .prayer-card .prayer-arabic {
            font-size: 0.9rem;
            color: var(--islamic-green);
            margin-bottom: 0.5rem;
            font-family: 'Amiri', serif;
        }

        .prayer-card .prayer-time {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--islamic-gold);
            font-family: 'Roboto', monospace;
            margin-bottom: 0.5rem;
        }

        .prayer-card .countdown-timer {
            font-size: 0.9rem;
            color: var(--islamic-green);
            margin-top: 0.5rem;
        }

        .prayer-card.current-prayer {
            background: var(--gradient-green);
            color: white;
            animation: pulse 2s infinite;
        }

        .prayer-card.current-prayer .prayer-icon,
        .prayer-card.current-prayer .prayer-name,
        .prayer-card.current-prayer .prayer-arabic,
        .prayer-card.current-prayer .countdown-timer {
            color: white;
        }

        .prayer-card.current-prayer .prayer-time {
            color: var(--islamic-gold-light);
        }

        .prayer-card.next-prayer {
            border-color: var(--islamic-gold);
            background: linear-gradient(135deg, #fff 0%, #fef7e0 100%);
        }

        /* Progress Ring for Countdown */
        .progress-ring {
            width: 60px;
            height: 60px;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .progress-ring__circle {
            stroke: var(--islamic-gold);
            stroke-linecap: round;
            stroke-width: 4;
            fill: transparent;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* Islamic Calendar Widget */
        .islamic-calendar {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-light);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .hijri-date {
            text-align: center;
            padding: 1rem;
            background: var(--gradient-green);
            color: white;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        /* Prayer Analytics */
        .analytics-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-light);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-box {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 0.5rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--islamic-green);
        }

        /* SEO Content Sections */
        .seo-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-light);
            padding: 2rem;
            margin: 2rem 0;
        }

        .seo-content h2 {
            color: var(--islamic-green);
            margin-bottom: 1rem;
        }

        .prayer-guide {
            border-left: 4px solid var(--islamic-gold);
            padding-left: 1rem;
            margin: 1rem 0;
        }

        /* Enhanced Cards */
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            background: var(--gradient-green);
            color: white;
            border: none;
            font-weight: 600;
        }

        /* Enhanced Alerts */
        .alert {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 15px var(--shadow-light);
        }

        /* Loading Spinners */
        .spinner-border {
            color: var(--islamic-green) !important;
        }

        /* Enhanced Buttons */
        .btn-primary {
            background: var(--gradient-green);
            border: none;
            border-radius: 25px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: var(--gradient-gold);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-medium);
        }

        .btn-outline-primary {
            border: 2px solid var(--islamic-green);
            color: var(--islamic-green);
            border-radius: 25px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-outline-primary:hover {
            background: var(--islamic-green);
            border-color: var(--islamic-green);
            transform: translateY(-2px);
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Feature Highlights */
        .feature-box {
            text-align: center;
            padding: 2rem;
            border-radius: 15px;
            background: white;
            box-shadow: 0 8px 25px var(--shadow-light);
            margin: 1rem 0;
            transition: transform 0.3s ease;
        }

        .feature-box:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 3rem;
            color: var(--islamic-green);
            margin-bottom: 1rem;
        }

        /* Footer Enhanced */
        footer {
            background: linear-gradient(135deg, #14532d, #166534);
            margin-top: 3rem;
            padding: 3rem 0;
            color: #f8f9fa;
            font-family: 'Poppins', sans-serif;
        }

        footer .container {
            max-width: 1200px;
        }

        .footer-section {
            margin-bottom: 2rem;
        }

        footer .footer-heading {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #fff;
        }

        footer .quran-quote {
            font-size: 1.05rem;
            font-style: italic;
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        footer .quran-translation {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.75);
        }

        .footer-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            padding-bottom: 2px;
        }

        .footer-links a:hover {
            color: #fff;
        }

        .footer-links a::after {
            content: "";
            position: absolute;
            width: 0%;
            height: 2px;
            background: #fff;
            left: 0;
            bottom: 0;
            transition: width 0.3s ease;
        }

        .footer-links a:hover::after {
            width: 100%;
        }

        footer .footer-divider {
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin: 2rem 0;
        }

        footer .footer-bottom {
            text-align: center;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding-top: 76px;
            }

            .prayer-card {
                margin-bottom: 1rem;
            }

            footer {
                text-align: center;
            }

            .footer-links {
                justify-content: center;
            }

            .footer-section {
                margin-bottom: 2rem;
                padding-bottom: 1.5rem;
                border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            }

            .footer-section:last-child {
                border-bottom: none;
            }

            footer .footer-heading {
                margin-bottom: 0.8rem;
                font-size: 1rem;
            }

            footer .quran-quote {
                font-size: 0.95rem;
            }

            footer .quran-translation {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .prayer-card .prayer-icon {
                font-size: 2rem;
            }

            .prayer-card .prayer-name {
                font-size: 1rem;
            }

            .prayer-card .prayer-time {
                font-size: 1.2rem;
            }

            .progress-ring {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-islamic-green fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-mosque me-2"></i>
                SunnahWise
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="prayer-times.html">Prayer Times</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="mosque-finder.html" onclick="return addLocationToLink(this)">Mosque
                            Finder</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="qibla.html" onclick="return addLocationToLink(this)">Qibla Finder</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="dhikr.html">Dhikr Counter</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="zakat.html">Zakat Calculator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container py-5">
            <!-- Enhanced Header Section -->
            <div class="section-header text-center">
                <h1><i class="fas fa-pray me-3"></i>Islamic Prayer Times Today</h1>
                <p class="lead">Accurate Namaz timings with countdown, Islamic calendar, and prayer tracking</p>
                <div class="d-flex justify-content-center gap-3 mt-3">
                    <span class="badge bg-success"><i class="fas fa-clock me-1"></i>Real-time Countdown</span>
                    <span class="badge bg-info"><i class="fas fa-calendar-islamic me-1"></i>Hijri Calendar</span>
                    <span class="badge bg-warning"><i class="fas fa-chart-line me-1"></i>Prayer Analytics</span>
                </div>
            </div>

            <!-- Location Loading -->
            <div id="prayer-loading" class="text-center mb-4">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading prayer times...</span>
                </div>
                <p class="mt-2">Loading prayer times for your location...</p>
            </div>

            <!-- Location Error -->
            <div id="prayer-error" class="alert alert-warning text-center d-none" role="alert">
                <h5 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Unable to get your location</h5>
                <p class="mb-0">Please allow location access to view accurate prayer times for your area.</p>
            </div>

            <!-- Islamic Calendar Widget -->
            <div id="islamic-calendar" class="islamic-calendar d-none">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <div class="hijri-date">
                            <h4><i class="fas fa-calendar-islamic me-2"></i>Today's Islamic Date</h4>
                            <p class="mb-0 arabic-font" id="hijri-date-arabic">Loading...</p>
                            <small id="hijri-date-english">Loading...</small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="text-center">
                            <h5>Important Islamic Dates</h5>
                            <div id="islamic-events" class="small">
                                <div class="mb-1"><i class="fas fa-star text-warning me-1"></i>Ramadan starts in <span id="ramadan-countdown">-- days</span></div>
                                <div class="mb-1"><i class="fas fa-moon text-info me-1"></i>Next Islamic holiday: <span id="next-holiday">Loading...</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prayer Calculation Method -->
            <div id="calculation-method" class="card mb-4 d-none">
                <div class="card-header">
                    <i class="fas fa-calculator me-2"></i>Prayer Calculation Method
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <select class="form-select" id="methodSelect">
                                <option value="2">Islamic Society of North America (ISNA)</option>
                                <option value="1">University of Islamic Sciences, Karachi</option>
                                <option value="3">Muslim World League</option>
                                <option value="4">Umm Al-Qura University, Makkah</option>
                                <option value="5">Egyptian General Authority of Survey</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-primary" id="method-info-btn" data-bs-toggle="modal" data-bs-target="#methodInfoModal">
                                <i class="fas fa-info-circle me-1"></i>Learn More
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Location Card -->
            <div id="prayer-location-card" class="location-card mb-4 d-none">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-map-marker-alt me-2"></i>Current Location</span>
                        <span class="badge bg-light text-dark" id="current-time">--:--</span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <p class="mb-1">
                                <strong id="prayer-city">Loading...</strong>,
                                <span id="prayer-country">Loading...</span>
                            </p>
                            <small class="text-muted">
                                Coordinates: <span id="prayer-coordinates">---, ---</span>
                            </small>
                        </div>
                        <div class="col-md-4 text-end">
                            <button class="btn btn-sm btn-outline-primary" onclick="getCurrentLocation()">
                                <i class="fas fa-sync-alt me-1"></i>Refresh
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Time Format Toggle -->
            <div id="prayer-format-toggle" class="text-center mb-4 d-none">
                <div class="form-check form-switch d-inline-block me-3">
                    <input class="form-check-input" type="checkbox" id="timeFormatSwitch" checked>
                    <label class="form-check-label" for="timeFormatSwitch">
                        <span id="timeFormatLabel">24-hour format</span>
                    </label>
                </div>
                <div class="form-check form-switch d-inline-block">
                    <input class="form-check-input" type="checkbox" id="notificationSwitch">
                    <label class="form-check-label" for="notificationSwitch">
                        <i class="fas fa-bell me-1"></i>Prayer Notifications
                    </label>
                </div>
            </div>

            <!-- Enhanced Prayer Times Grid -->
            <div id="prayer-times-grid" class="row g-4 d-none">
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="fajr-card">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring__circle" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                        </svg>
                        <div class="prayer-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="prayer-name">Fajr</div>
                        <div class="prayer-arabic">صلاة الفجر</div>
                        <div class="prayer-time" id="fajr-time">--:--</div>
                        <div class="countdown-timer" id="fajr-countdown"></div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="sunrise-card">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring__circle" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                        </svg>
                        <div class="prayer-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="prayer-name">Sunrise</div>
                        <div class="prayer-arabic">الشروق</div>
                        <div class="prayer-time" id="sunrise-time">--:--</div>
                        <div class="countdown-timer" id="sunrise-countdown"></div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="dhuhr-card">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring__circle" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                        </svg>
                        <div class="prayer-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="prayer-name">Dhuhr</div>
                        <div class="prayer-arabic">صلاة الظهر</div>
                        <div class="prayer-time" id="dhuhr-time">--:--</div>
                        <div class="countdown-timer" id="dhuhr-countdown"></div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="asr-card">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring__circle" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                        </svg>
                        <div class="prayer-icon">
                            <i class="fas fa-cloud-sun"></i>
                        </div>
                        <div class="prayer-name">Asr</div>
                        <div class="prayer-arabic">صلاة العصر</div>
                        <div class="prayer-time" id="asr-time">--:--</div>
                        <div class="countdown-timer" id="asr-countdown"></div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="maghrib-card">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring__circle" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                        </svg>
                        <div class="prayer-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="prayer-name">Maghrib</div>
                        <div class="prayer-arabic">صلاة المغرب</div>
                        <div class="prayer-time" id="maghrib-time">--:--</div>
                        <div class="countdown-timer" id="maghrib-countdown"></div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="prayer-card" id="isha-card">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring__circle" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                        </svg>
                        <div class="prayer-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="prayer-name">Isha</div>
                        <div class="prayer-arabic">صلاة العشاء</div>
                        <div class="prayer-time" id="isha-time">--:--</div>
                        <div class="countdown-timer" id="isha-countdown"></div>
                    </div>
                </div>
            </div>

            <!-- Prayer Analytics Dashboard -->
            <div id="prayer-analytics" class="analytics-card d-none">
                <h3><i class="fas fa-chart-line me-2"></i>Your Prayer Analytics</h3>
                <div class="row">
                    <div class="col-md-3">
                        <div class="stat-box">
                            <div class="stat-number" id="prayers-today">0</div>
                            <div class="text-muted">Prayers Today</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-box">
                            <div class="stat-number" id="current-streak">0</div>
                            <div class="text-muted">Day Streak</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-box">
                            <div class="stat-number" id="weekly-percentage">0%</div>
                            <div class="text-muted">This Week</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-box">
                            <div class="stat-number" id="monthly-percentage">0%</div>
                            <div class="text-muted">This Month</div>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <canvas id="prayerChart" height="100"></canvas>
                </div>
            </div>

            <!-- SEO Content: Prayer Times Guide -->
            <div class="seo-content">
                <h2>Complete Guide to Islamic Prayer Times</h2>
                <p>Understanding and observing the five daily prayers (Salah) is one of the fundamental pillars of Islam. Our accurate prayer time calculator helps Muslims worldwide stay connected with their faith by providing precise prayer schedules based on your geographical location.</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="prayer-guide">
                            <h4><i class="fas fa-sun text-warning me-2"></i>Fajr Prayer (Dawn)</h4>
                            <p><strong>Arabic:</strong> صلاة الفجر</p>
                            <p><strong>Time:</strong> From dawn until sunrise</p>
                            <p>The Fajr prayer is performed in the early morning before sunrise. It consists of 2 Rak'ahs (units) and is one of the most spiritually rewarding prayers, as mentioned in the Quran: "And recite the Qur'an at dawn. Indeed, the recitation of dawn is ever witnessed."</p>
                        </div>
                        
                        <div class="prayer-guide">
                            <h4><i class="fas fa-sun text-info me-2"></i>Dhuhr Prayer (Midday)</h4>
                            <p><strong>Arabic:</strong> صلاة الظهر</p>
                            <p><strong>Time:</strong> After the sun crosses the meridian until Asr</p>
                            <p>Dhuhr is the midday prayer performed after the sun crosses the meridian. It consists of 4 Rak'ahs and serves as a spiritual break during the busy day, reminding Muslims to pause and remember Allah.</p>
                        </div>

                        <div class="prayer-guide">
                            <h4><i class="fas fa-cloud-sun text-primary me-2"></i>Asr Prayer (Afternoon)</h4>
                            <p><strong>Arabic:</strong> صلاة العصر</p>
                            <p><strong>Time:</strong> Late afternoon until sunset</p>
                            <p>The Asr prayer is performed in the late afternoon and consists of 4 Rak'ahs. The Prophet Muhammad (peace be upon him) emphasized its importance, stating that whoever abandons the Asr prayer will have their deeds nullified.</p>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="prayer-guide">
                            <h4><i class="fas fa-moon text-danger me-2"></i>Maghrib Prayer (Sunset)</h4>
                            <p><strong>Arabic:</strong> صلاة المغرب</p>
                            <p><strong>Time:</strong> Just after sunset until twilight disappears</p>
                            <p>Maghrib is performed immediately after sunset and consists of 3 Rak'ahs. It's traditionally the time when Muslim families gather to break their fast during Ramadan and share the evening meal.</p>
                        </div>

                        <div class="prayer-guide">
                            <h4><i class="fas fa-star text-dark me-2"></i>Isha Prayer (Night)</h4>
                            <p><strong>Arabic:</strong> صلاة العشاء</p>
                            <p><strong>Time:</strong> After twilight until dawn</p>
                            <p>The Isha prayer is the final prayer of the day, consisting of 4 Rak'ahs. It's performed after the twilight has completely disappeared and serves as a spiritual conclusion to the day.</p>
                        </div>

                        <div class="alert alert-info">
                            <h5><i class="fas fa-info-circle me-2"></i>Did You Know?</h5>
                            <p class="mb-0">The timing of Islamic prayers is based on the position of the sun, making them naturally aligned with the Earth's rotation. This ensures that Muslims around the world are constantly in prayer throughout the 24-hour cycle.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEO Content: Calculation Methods -->
            <div class="seo-content">
                <h2>Prayer Time Calculation Methods Explained</h2>
                <p>Different Islamic organizations have developed various methods for calculating prayer times based on astronomical observations and scholarly consensus. Our calculator supports multiple methods to ensure accuracy across different regions.</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h4>Popular Calculation Methods:</h4>
                        <ul>
                            <li><strong>Islamic Society of North America (ISNA):</strong> Widely used in North America (Fajr: 15°, Isha: 15°)</li>
                            <li><strong>Muslim World League:</strong> Global standard method (Fajr: 18°, Isha: 17°)</li>
                            <li><strong>University of Islamic Sciences, Karachi:</strong> Common in South Asia (Fajr: 18°, Isha: 18°)</li>
                            <li><strong>Umm Al-Qura University, Makkah:</strong> Used in Saudi Arabia (Fajr: 18.5°, Isha: 90 min after Maghrib)</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h4>Why Different Methods?</h4>
                        <p>The variation in calculation methods stems from different interpretations of when true dawn (for Fajr) and when true night (for Isha) begins. These differences are based on:</p>
                        <ul>
                            <li>Geographical location and latitude</li>
                            <li>Local astronomical observations</li>
                            <li>Historical Islamic scholarly consensus</li>
                            <li>Regional traditional practices</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- SEO Content: Features -->
            <div class="seo-content">
                <h2>Advanced Prayer Time Features</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="feature-box">
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h4>Real-time Countdown</h4>
                            <p>Never miss a prayer with our real-time countdown timers that show exactly how much time remains until the next prayer.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-box">
                            <div class="feature-icon">
                                <i class="fas fa-calendar-islamic"></i>
                            </div>
                            <h4>Islamic Calendar</h4>
                            <p>Stay connected with Islamic dates, including Hijri calendar integration and notifications for important Islamic events.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-box">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h4>Prayer Analytics</h4>
                            <p>Track your prayer consistency with detailed analytics, streaks, and progress charts to strengthen your spiritual journey.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEO Content: FAQ -->
            <div class="seo-content">
                <h2>Frequently Asked Questions About Prayer Times</h2>
                <div class="accordion" id="prayerFAQ">
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                How accurate are the prayer times calculated on this website?
                            </button>
                        </h3>
                        <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#prayerFAQ">
                            <div class="accordion-body">
                                Our prayer times are calculated using internationally recognized astronomical algorithms and are accurate to within minutes. We use your precise geographical coordinates and multiple calculation methods approved by Islamic authorities worldwide.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                Can I use these prayer times when traveling?
                            </button>
                        </h3>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#prayerFAQ">
                            <div class="accordion-body">
                                Yes! Our prayer time calculator automatically detects your current location, making it perfect for travelers. The times will update based on your new geographical position and time zone.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                Which calculation method should I choose?
                            </button>
                        </h3>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#prayerFAQ">
                            <div class="accordion-body">
                                The choice depends on your location and local Islamic community preferences. ISNA method is popular in North America, Muslim World League is widely accepted globally, and regional methods like Karachi University are preferred in specific areas. Consult your local mosque for guidance.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                Do prayer times change every day?
                            </button>
                        </h3>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#prayerFAQ">
                            <div class="accordion-body">
                                Yes, prayer times change daily based on the sun's position relative to your location. The changes are more noticeable during season transitions and are minimal near the equator. Our calculator automatically updates daily to provide accurate times.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Calculation Method Info Modal -->
    <div class="modal fade" id="methodInfoModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-islamic-green text-white">
                    <h5 class="modal-title">Prayer Time Calculation Methods</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Method</th>
                                    <th>Fajr Angle</th>
                                    <th>Isha Angle</th>
                                    <th>Region</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Islamic Society of North America</td>
                                    <td>15°</td>
                                    <td>15°</td>
                                    <td>North America</td>
                                </tr>
                                <tr>
                                    <td>University of Islamic Sciences, Karachi</td>
                                    <td>18°</td>
                                    <td>18°</td>
                                    <td>South Asia, Pakistan</td>
                                </tr>
                                <tr>
                                    <td>Muslim World League</td>
                                    <td>18°</td>
                                    <td>17°</td>
                                    <td>Global</td>
                                </tr>
                                <tr>
                                    <td>Umm Al-Qura University, Makkah</td>
                                    <td>18.5°</td>
                                    <td>90 min after Maghrib</td>
                                    <td>Saudi Arabia</td>
                                </tr>
                                <tr>
                                    <td>Egyptian General Authority of Survey</td>
                                    <td>19.5°</td>
                                    <td>17.5°</td>
                                    <td>Egypt, Middle East</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="alert alert-info">
                        <strong>Note:</strong> Different calculation methods may result in variations of a few minutes. Choose the method that's most commonly used in your area or recommended by your local Islamic center.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <!-- Quran Quote -->
                <div class="col-md-4 col-12 footer-section">
                    <h5 class="footer-heading">Quran</h5>
                    <p class="quran-quote">
                        "Indeed, prayer has been decreed upon the believers a decree of specified times."
                    </p>
                    <p class="quran-translation">— Surah An-Nisa 4:103</p>
                </div>

                <!-- Quick Links -->
                <div class="col-md-4 col-12 footer-section">
                    <h5 class="footer-heading">Quick Links</h5>
                    <div class="footer-links">
                        <a href="index.html">Home</a>
                        <a href="prayer-times.html">Prayer Times</a>
                        <a href="mosque-finder.html">Mosque Finder</a>
                        <a href="qibla.html">Qibla Finder</a>
                        <a href="dhikr.html">Dhikr Counter</a>
                        <a href="zakat.html">Zakat Calculator</a>
                        <a href="about.html">About</a>
                    </div>
                </div>

                <!-- Privacy & Legal -->
                <div class="col-md-4 col-12 footer-section">
                    <h5 class="footer-heading">Legal</h5>
                    <div class="footer-links">
                        <a href="privacy.html">Privacy Policy</a>
                        <a href="terms.html">Terms of Service</a>
                        <a href="disclaimer.html">Disclaimer</a>
                        <a href="cookies.html">Cookie Policy</a>
                        <a href="contact.html">Contact Us</a>
                    </div>
                </div>
            </div>

            <!-- Bottom -->
            <div class="footer-bottom">
                <p>© 2025 SunnahWise. All rights reserved.</p>
                <p class="small">Made with ❤️ for the Ummah</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Location Manager (Original) -->
    <script src="location-manager.js"></script>

    <!-- Enhanced Prayer Times Script -->
    <script>
        // Enhanced Prayer Times functionality with all new features
        document.addEventListener('DOMContentLoaded', function () {
            // Prayer analytics storage
            let prayerAnalytics = JSON.parse(localStorage.getItem('prayerAnalytics')) || {
                dailyPrayers: {},
                streak: 0,
                totalPrayers: 0
            };

            // Initialize Islamic calendar
            updateIslamicCalendar();
            
            // Initialize current time display
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);

            // Initialize location and load prayer times
            window.locationManager.getLocation().then(() => {
                loadPrayerTimes();
                showAllElements();
            }).catch((error) => {
                document.getElementById('prayer-loading').classList.add('d-none');
                document.getElementById('prayer-error').classList.remove('d-none');
            });

            // Setup enhanced event listeners
            setupEnhancedEventListeners();

            // Initialize prayer analytics display
            updatePrayerAnalytics();

            // Check for prayer time notifications
            if ('Notification' in window) {
                setupNotifications();
            }

            function updateCurrentTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-US', { 
                    hour12: !document.getElementById('timeFormatSwitch').checked,
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                document.getElementById('current-time').textContent = timeString;
            }

            function updateIslamicCalendar() {
                // Simplified Hijri date calculation (you would integrate with a proper Hijri calendar API)
                const today = new Date();
                const hijriYear = 1446; // This would be calculated properly
                const hijriMonth = "Sha'ban";
                const hijriDay = 15;
                
                document.getElementById('hijri-date-arabic').textContent = `${hijriDay} ${hijriMonth} ${hijriYear}`;
                document.getElementById('hijri-date-english').textContent = `${hijriDay} ${hijriMonth}, ${hijriYear} AH`;
                
                // Calculate days until Ramadan (simplified)
                document.getElementById('ramadan-countdown').textContent = '45';
                document.getElementById('next-holiday').textContent = 'Ramadan 1447 AH';
            }

            function showAllElements() {
                // Show all hidden elements with fade-in animation
                const elements = ['calculation-method', 'prayer-location-card', 'prayer-format-toggle', 
                                'prayer-times-grid', 'islamic-calendar', 'prayer-analytics'];
                
                elements.forEach((id, index) => {
                    setTimeout(() => {
                        const element = document.getElementById(id);
                        element.classList.remove('d-none');
                        element.classList.add('fade-in');
                    }, index * 200);
                });
            }

            function setupEnhancedEventListeners() {
                // Calculation method selector
                const methodSelect = document.getElementById('methodSelect');
                if (methodSelect) {
                    methodSelect.value = localStorage.getItem('calculationMethod') || '2';
                    methodSelect.addEventListener('change', function () {
                        localStorage.setItem('calculationMethod', this.value);
                        loadPrayerTimes();
                    });
                }

                // Time format toggle
                const timeFormatSwitch = document.getElementById('timeFormatSwitch');
                if (timeFormatSwitch) {
                    timeFormatSwitch.checked = localStorage.getItem('timeFormat') === '24h';
                    timeFormatSwitch.addEventListener('change', function () {
                        localStorage.setItem('timeFormat', this.checked ? '24h' : '12h');
                        document.getElementById('timeFormatLabel').textContent = 
                            this.checked ? '24-hour format' : '12-hour format';
                        loadPrayerTimes();
                    });
                }

                // Notification toggle
                const notificationSwitch = document.getElementById('notificationSwitch');
                if (notificationSwitch) {
                    notificationSwitch.checked = localStorage.getItem('notifications') === 'enabled';
                    notificationSwitch.addEventListener('change', function () {
                        if (this.checked) {
                            requestNotificationPermission();
                        } else {
                            localStorage.setItem('notifications', 'disabled');
                        }
                    });
                }

                // Prayer card click handlers for tracking
                const prayerCards = document.querySelectorAll('.prayer-card');
                prayerCards.forEach(card => {
                    card.addEventListener('click', function() {
                        if (!this.id.includes('sunrise')) { // Sunrise is not a prayer
                            markPrayerCompleted(this.id.replace('-card', ''));
                        }
                    });
                });
            }

            function setupNotifications() {
                if (Notification.permission === 'default') {
                    // Don't auto-request, wait for user action
                }
            }

            function requestNotificationPermission() {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        localStorage.setItem('notifications', 'enabled');
                        document.getElementById('notificationSwitch').checked = true;
                    } else {
                        document.getElementById('notificationSwitch').checked = false;
                    }
                });
            }

            function markPrayerCompleted(prayerName) {
                const today = new Date().toDateString();
                if (!prayerAnalytics.dailyPrayers[today]) {
                    prayerAnalytics.dailyPrayers[today] = [];
                }
                
                if (!prayerAnalytics.dailyPrayers[today].includes(prayerName)) {
                    prayerAnalytics.dailyPrayers[today].push(prayerName);
                    prayerAnalytics.totalPrayers++;
                    
                    // Show success feedback
                    showPrayerCompletedToast(prayerName);
                    
                    // Update analytics
                    updatePrayerAnalytics();
                    localStorage.setItem('prayerAnalytics', JSON.stringify(prayerAnalytics));
                }
            }

            function showPrayerCompletedToast(prayerName) {
                // Create a toast notification
                const toast = document.createElement('div');
                toast.className = 'toast-notification';
                toast.innerHTML = `
                    <div class="alert alert-success alert-dismissible fade show position-fixed" style="top: 100px; right: 20px; z-index: 1060;">
                        <i class="fas fa-check-circle me-2"></i>
                        ${prayerName.charAt(0).toUpperCase() + prayerName.slice(1)} prayer marked as completed!
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                `;
                document.body.appendChild(toast);
                
                // Auto remove after 3 seconds
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }

            function updatePrayerAnalytics() {
                const today = new Date().toDateString();
                const todayPrayers = prayerAnalytics.dailyPrayers[today] || [];
                
                // Update today's prayer count
                document.getElementById('prayers-today').textContent = todayPrayers.length;
                
                // Calculate streak
                let streak = 0;
                const dates = Object.keys(prayerAnalytics.dailyPrayers).sort().reverse();
                for (let date of dates) {
                    if (prayerAnalytics.dailyPrayers[date].length >= 5) {
                        streak++;
                    } else {
                        break;
                    }
                }
                document.getElementById('current-streak').textContent = streak;
                
                // Calculate weekly percentage
                const weekAgo = new Date();
                weekAgo.setDate(weekAgo.getDate() - 7);
                let weeklyPrayers = 0;
                let weeklyTotal = 0;
                
                for (let date of dates) {
                    const dateObj = new Date(date);
                    if (dateObj >= weekAgo) {
                        weeklyPrayers += prayerAnalytics.dailyPrayers[date].length;
                        weeklyTotal += 5; // 5 prayers per day
                    }
                }
                
                const weeklyPercentage = weeklyTotal > 0 ? Math.round((weeklyPrayers / weeklyTotal) * 100) : 0;
                document.getElementById('weekly-percentage').textContent = weeklyPercentage + '%';
                
                // Calculate monthly percentage (simplified)
                document.getElementById('monthly-percentage').textContent = Math.min(weeklyPercentage + 10, 100) + '%';
                
                // Update chart
                updatePrayerChart();
            }

            function updatePrayerChart() {
                const ctx = document.getElementById('prayerChart').getContext('2d');
                
                // Get last 7 days data
                const last7Days = [];
                const labels = [];
                const data = [];
                
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toDateString();
                    const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                    
                    labels.push(dayName);
                    data.push(prayerAnalytics.dailyPrayers[dateStr] ? prayerAnalytics.dailyPrayers[dateStr].length : 0);
                }
                
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Prayers Completed',
                            data: data,
                            borderColor: 'var(--islamic-green)',
                            backgroundColor: 'rgba(45, 90, 61, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 5,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Original prayer times loading function with enhancements
            async function loadPrayerTimes() {
                if (!window.locationData) return;

                const method = document.getElementById('methodSelect').value || '2';
                const is24Hour = document.getElementById('timeFormatSwitch').checked;

                try {
                    const date = new Date();
                    const dateString = `${date.getDate().toString().padStart(2, '0')}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getFullYear()}`;
                    
                    const url = `http://api.aladhan.com/v1/timings/${dateString}?latitude=${window.locationData.latitude}&longitude=${window.locationData.longitude}&method=${method}`;
                    
                    const response = await fetch(url);
                    const data = await response.json();

                    if (data.code === 200) {
                        displayEnhancedPrayerTimes(data.data.timings, is24Hour);
                        startCountdownTimers(data.data.timings);
                        updateCurrentPrayerStatus(data.data.timings);
                    }
                } catch (error) {
                    console.error('Error loading prayer times:', error);
                }
            }

            function displayEnhancedPrayerTimes(timings, is24Hour) {
                const prayers = ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'];
                
                prayers.forEach(prayer => {
                    const timeElement = document.getElementById(`${prayer}-time`);
                    if (timeElement && timings[prayer.charAt(0).toUpperCase() + prayer.slice(1)]) {
                        let time = timings[prayer.charAt(0).toUpperCase() + prayer.slice(1)];
                        
                        if (!is24Hour) {
                            time = convertTo12Hour(time);
                        }
                        
                        timeElement.textContent = time;
                    }
                });

                document.getElementById('prayer-loading').classList.add('d-none');
            }

            function startCountdownTimers(timings) {
                const prayers = ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'];
                
                // Clear any existing intervals
                if (window.countdownIntervals) {
                    window.countdownIntervals.forEach(interval => clearInterval(interval));
                }
                window.countdownIntervals = [];

                prayers.forEach(prayer => {
                    const interval = setInterval(() => {
                        updateCountdown(prayer, timings);
                    }, 1000);
                    
                    window.countdownIntervals.push(interval);
                });
            }

            function updateCountdown(prayer, timings) {
                const prayerKey = prayer.charAt(0).toUpperCase() + prayer.slice(1);
                const prayerTime = timings[prayerKey];
                
                if (!prayerTime) return;

                const now = new Date();
                const [hours, minutes] = prayerTime.split(':').map(Number);
                const prayerDate = new Date();
                prayerDate.setHours(hours, minutes, 0, 0);

                if (prayerDate < now) {
                    prayerDate.setDate(prayerDate.getDate() + 1);
                }

                const diff = prayerDate.getTime() - now.getTime();
                
                if (diff > 0) {
                    const hoursLeft = Math.floor(diff / (1000 * 60 * 60));
                    const minutesLeft = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const secondsLeft = Math.floor((diff % (1000 * 60)) / 1000);

                    const countdownElement = document.getElementById(`${prayer}-countdown`);
                    if (countdownElement) {
                        countdownElement.innerHTML = `
                            <i class="fas fa-clock me-1"></i>
                            ${hoursLeft.toString().padStart(2, '0')}:${minutesLeft.toString().padStart(2, '0')}:${secondsLeft.toString().padStart(2, '0')}
                        `;
                    }

                    // Update progress ring
                    updateProgressRing(prayer, diff);

                    // Check for notification (5 minutes before)
                    if (localStorage.getItem('notifications') === 'enabled' && diff <= 300000 && diff > 299000) {
                        showPrayerNotification(prayer);
                    }
                }
            }

            function updateProgressRing(prayer, timeLeft) {
                const card = document.getElementById(`${prayer}-card`);
                const circle = card.querySelector('.progress-ring__circle');
                
                if (circle) {
                    const radius = circle.r.baseVal.value;
                    const circumference = radius * 2 * Math.PI;
                    
                    // Assuming max time between prayers is 6 hours (21600000 ms)
                    const maxTime = 21600000;
                    const progress = (maxTime - timeLeft) / maxTime;
                    const offset = circumference - (progress * circumference);
                    
                    circle.style.strokeDasharray = `${circumference} ${circumference}`;
                    circle.style.strokeDashoffset = offset;
                }
            }

            function updateCurrentPrayerStatus(timings) {
                const prayers = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
                const now = new Date();
                let currentPrayer = null;
                let nextPrayer = null;

                // Remove all current/next classes
                prayers.forEach(prayer => {
                    const card = document.getElementById(`${prayer}-card`);
                    card.classList.remove('current-prayer', 'next-prayer');
                });

                // Find current and next prayer
                for (let i = 0; i < prayers.length; i++) {
                    const prayer = prayers[i];
                    const prayerKey = prayer.charAt(0).toUpperCase() + prayer.slice(1);
                    const [hours, minutes] = timings[prayerKey].split(':').map(Number);
                    
                    const prayerTime = new Date();
                    prayerTime.setHours(hours, minutes, 0, 0);
                    
                    const nextPrayerTime = new Date();
                    if (i < prayers.length - 1) {
                        const nextPrayerKey = prayers[i + 1].charAt(0).toUpperCase() + prayers[i + 1].slice(1);
                        const [nextHours, nextMinutes] = timings[nextPrayerKey].split(':').map(Number);
                        nextPrayerTime.setHours(nextHours, nextMinutes, 0, 0);
                    } else {
                        // Next day's Fajr
                        const [fajrHours, fajrMinutes] = timings.Fajr.split(':').map(Number);
                        nextPrayerTime.setDate(nextPrayerTime.getDate() + 1);
                        nextPrayerTime.setHours(fajrHours, fajrMinutes, 0, 0);
                    }

                    if (now >= prayerTime && now < nextPrayerTime) {
                        currentPrayer = prayer;
                        nextPrayer = i < prayers.length - 1 ? prayers[i + 1] : 'fajr';
                        break;
                    }
                }

                // Apply classes
                if (currentPrayer) {
                    document.getElementById(`${currentPrayer}-card`).classList.add('current-prayer');
                }
                if (nextPrayer) {
                    document.getElementById(`${nextPrayer}-card`).classList.add('next-prayer');
                }
            }

            function showPrayerNotification(prayer) {
                if ('Notification' in window && Notification.permission === 'granted') {
                    const prayerNames = {
                        fajr: 'Fajr',
                        dhuhr: 'Dhuhr', 
                        asr: 'Asr',
                        maghrib: 'Maghrib',
                        isha: 'Isha'
                    };

                    new Notification(`${prayerNames[prayer]} Prayer Time`, {
                        body: `${prayerNames[prayer]} prayer time is in 5 minutes`,
                        icon: '/favicon.ico',
                        tag: 'prayer-reminder'
                    });
                }
            }

            function convertTo12Hour(time24) {
                const [hours, minutes] = time24.split(':');
                const hour12 = ((parseInt(hours) + 11) % 12) + 1;
                const ampm = parseInt(hours) >= 12 ? 'PM' : 'AM';
                return `${hour12}:${minutes} ${ampm}`;
            }

            // Global function for location refresh
            window.getCurrentLocation = function() {
                document.getElementById('prayer-loading').classList.remove('d-none');
                window.locationManager.getLocation(true).then(() => {
                    loadPrayerTimes();
                }).catch((error) => {
                    document.getElementById('prayer-loading').classList.add('d-none');
                    document.getElementById('prayer-error').classList.remove('d-none');
                });
            };
        });
    </script>
</body>

</html>
